<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NextBloom | AI-Powered Dropout Recovery Platform</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/scrollreveal"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="chatbot_config.js"></script>
  <style>
    body {
      font-family: 'Inter', sans-serif;
      scroll-behavior: smooth;
    }
    
    .glass {
      background: rgba(255, 255, 255, 0.25);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.18);
    }
    
    .glass-dark {
      background: rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .gradient-text {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .floating-animation {
      animation: float 6s ease-in-out infinite;
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-20px); }
    }
    
    .pulse-ring {
      animation: pulse-ring 2s cubic-bezier(0.455, 0.03, 0.515, 0.955) infinite;
    }
    
    @keyframes pulse-ring {
      0% {
        transform: scale(0.8);
        opacity: 1;
      }
      80%, 100% {
        transform: scale(1.2);
        opacity: 0;
      }
    }
    
    .voice-button {
      position: relative;
      overflow: hidden;
    }
    
    .voice-button::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      transform: translate(-50%, -50%);
      transition: width 0.6s, height 0.6s;
    }
    
    .voice-button:hover::before {
      width: 300px;
      height: 300px;
    }
    
    .navbar-scrolled {
      background: rgba(255, 255, 255, 0.95) !important;
      backdrop-filter: blur(20px);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      padding: 12px 0 !important;
    }
    
    .navbar-scrolled .nav-brand h1 {
      color: #1f2937 !important;
    }
    
    .navbar-scrolled .nav-brand p {
      color: #6b7280 !important;
    }
    
    .navbar-scrolled .nav-links a {
      color: #374151 !important;
    }
    
    .navbar-scrolled .nav-links a:hover {
      color: #7c3aed !important;
    }
    
    .navbar-scrolled .cta-button {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
      color: white !important;
    }
    
    .navbar-scrolled .mobile-menu-btn {
      color: #374151 !important;
    }
    
    .navbar-scrolled .mobile-menu-btn:hover {
      color: #7c3aed !important;
    }

    
    .navbar-scrolled .nav-brand .text-sm {
      color: #059669 !important;
    }
    
    /* Ensure all navbar elements have proper contrast */
    .navbar-scrolled * {
      text-shadow: none !important;
    }
    
    /* Fix any potential text shadow issues */
    .navbar-scrolled .nav-brand h1,
    .navbar-scrolled .nav-brand p,
    .navbar-scrolled .nav-links a {
      text-shadow: none !important;
      font-weight: 500 !important;
    }
    
    .nav-menu {
      transform: translateY(-10px);
      opacity: 0;
      animation: slideDown 0.5s ease-out forwards;
    }
    
    @keyframes slideDown {
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }
    
    .scroll-indicator {
      position: fixed;
      top: 0;
      left: 0;
      height: 4px;
      background: linear-gradient(90deg, #667eea, #764ba2);
      z-index: 100;
      transition: width 0.3s ease;
    }
    
    .mobile-menu {
      transform: translateX(100%);
      transition: transform 0.3s ease-in-out;
    }
    
    .mobile-menu.active {
      transform: translateX(0);
    }
    
    .feature-card {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .feature-card:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
    }
    
    .hero-bg {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      position: relative;
      overflow: hidden;
    }
    
    .hero-bg::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000"><defs><radialGradient id="a" cx="50%" cy="50%" r="50%"><stop offset="0%" stop-color="%23ffffff" stop-opacity="0.1"/><stop offset="100%" stop-color="%23ffffff" stop-opacity="0"/></radialGradient></defs><circle cx="200" cy="200" r="100" fill="url(%23a)"/><circle cx="800" cy="300" r="150" fill="url(%23a)"/><circle cx="400" cy="700" r="120" fill="url(%23a)"/></svg>');
      opacity: 0.3;
    }
    
    .mic-animation {
      animation: micPulse 2s ease-in-out infinite;
    }
    
    @keyframes micPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
    
    .ripple {
      position: absolute;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      transform: scale(0);
      animation: ripple 2s linear infinite;
    }
    
    @keyframes ripple {
      to {
        transform: scale(4);
        opacity: 0;
      }
    }
    
    .bounce-in {
      animation: bounceIn 0.8s ease-out;
    }
    
    @keyframes bounceIn {
      0% {
        transform: scale(0.3);
        opacity: 0;
      }
      50% {
        transform: scale(1.05);
      }
      70% {
        transform: scale(0.9);
      }
      100% {
        transform: scale(1);
        opacity: 1;
      }
    }
    
    .slide-in-left {
      animation: slideInLeft 0.8s ease-out;
    }
    
    @keyframes slideInLeft {
      0% {
        transform: translateX(-100px);
        opacity: 0;
      }
      100% {
        transform: translateX(0);
        opacity: 1;
      }
    }
    
    .slide-in-right {
      animation: slideInRight 0.8s ease-out;
    }
    
    @keyframes slideInRight {
      0% {
        transform: translateX(100px);
        opacity: 0;
      }
      100% {
        transform: translateX(0);
        opacity: 1;
      }
    }
    
    .fade-in-up {
      animation: fadeInUp 0.8s ease-out;
    }
    
    @keyframes fadeInUp {
      0% {
        transform: translateY(30px);
        opacity: 0;
      }
      100% {
        transform: translateY(0);
        opacity: 1;
      }
    }
    
    .rotate-in {
      animation: rotateIn 0.8s ease-out;
    }
    
    @keyframes rotateIn {
      0% {
        transform: rotate(-180deg) scale(0);
        opacity: 0;
      }
      100% {
        transform: rotate(0) scale(1);
        opacity: 1;
      }
    }
    
    .pulse-glow {
      animation: pulseGlow 2s ease-in-out infinite;
    }
    
    @keyframes pulseGlow {
      0%, 100% {
        box-shadow: 0 0 20px rgba(102, 126, 234, 0.4);
      }
      50% {
        box-shadow: 0 0 40px rgba(102, 126, 234, 0.8);
      }
    }
    
    .text-shimmer {
      background: linear-gradient(90deg, #667eea, #764ba2, #667eea);
      background-size: 200% 100%;
      animation: shimmer 3s ease-in-out infinite;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    @keyframes shimmer {
      0%, 100% {
        background-position: 200% 0;
      }
      50% {
        background-position: -200% 0;
      }
    }
    
    .morphing-blob {
      animation: morphBlob 8s ease-in-out infinite;
    }
    
    @keyframes morphBlob {
      0%, 100% {
        border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%;
      }
      25% {
        border-radius: 30% 60% 70% 40% / 50% 60% 30% 60%;
      }
      50% {
        border-radius: 50% 60% 30% 60% / 30% 60% 70% 40%;
      }
      75% {
        border-radius: 60% 40% 60% 30% / 70% 30% 60% 70%;
      }
    }
    
    .tilt-effect {
      transform-style: preserve-3d;
      transition: transform 0.3s ease;
    }
    
    .parallax-element {
      transition: transform 0.1s ease-out;
    }
    
    .glow-on-hover {
      transition: all 0.3s ease;
    }
    
    .glow-on-hover:hover {
      box-shadow: 0 0 30px rgba(102, 126, 234, 0.6), 0 0 60px rgba(102, 126, 234, 0.4);
      transform: translateY(-5px);
    }
    
    .wave-animation {
      animation: wave 2s ease-in-out infinite;
    }
    
    @keyframes wave {
      0%, 100% { transform: rotate(0deg); }
      25% { transform: rotate(5deg); }
      75% { transform: rotate(-5deg); }
    }
    
    .typewriter {
      overflow: hidden;
      border-right: 3px solid rgba(255, 255, 255, 0.75);
      white-space: nowrap;
      animation: typing 3.5s steps(40, end), blink-caret 0.75s step-end infinite;
    }
    
    @keyframes typing {
      from { width: 0; }
      to { width: 100%; }
    }
    
    @keyframes blink-caret {
      from, to { border-color: transparent; }
      50% { border-color: rgba(255, 255, 255, 0.75); }
    }
    
    .gradient-border {
      position: relative;
      background: linear-gradient(45deg, #667eea, #764ba2, #667eea);
      background-size: 400% 400%;
      animation: gradientShift 4s ease infinite;
    }
    
    @keyframes gradientShift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }
    
    .elastic-hover {
      transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }
    
    .elastic-hover:hover {
      transform: scale(1.05);
    }
    
    .neon-glow {
      text-shadow: 0 0 5px currentColor, 0 0 10px currentColor, 0 0 15px currentColor;
      animation: neonPulse 2s ease-in-out infinite alternate;
    }
    
    @keyframes neonPulse {
      from { text-shadow: 0 0 5px currentColor, 0 0 10px currentColor, 0 0 15px currentColor; }
      to { text-shadow: 0 0 10px currentColor, 0 0 20px currentColor, 0 0 30px currentColor; }
    }
    
    .liquid-morph {
      animation: liquidMorph 6s ease-in-out infinite;
    }
    
    @keyframes liquidMorph {
      0%, 100% { 
        border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%;
        transform: rotate(0deg) scale(1);
      }
      20% { 
        border-radius: 30% 60% 70% 40% / 50% 60% 30% 60%;
        transform: rotate(72deg) scale(1.1);
      }
      40% { 
        border-radius: 50% 60% 30% 60% / 30% 60% 70% 40%;
        transform: rotate(144deg) scale(0.9);
      }
      60% { 
        border-radius: 60% 40% 60% 30% / 70% 30% 60% 70%;
        transform: rotate(216deg) scale(1.05);
      }
      80% { 
        border-radius: 40% 70% 60% 30% / 40% 50% 60% 50%;
        transform: rotate(288deg) scale(0.95);
      }
    }
    
    .breathing {
      animation: breathe 4s ease-in-out infinite;
    }
    
    @keyframes breathe {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    
    .slide-up-fade {
      opacity: 0;
      transform: translateY(50px);
      transition: opacity 0.8s ease, transform 0.8s ease;
    }
    
    .slide-up-fade.visible {
      opacity: 1;
      transform: translateY(0);
    }
    
    .zoom-in-rotate {
      opacity: 0;
      transform: scale(0.5) rotate(-180deg);
      transition: opacity 0.8s ease, transform 0.8s ease;
    }
    
    .zoom-in-rotate.visible {
      opacity: 1;
      transform: scale(1) rotate(0deg);
    }
    
    .flip-in {
      opacity: 0;
      transform: perspective(400px) rotateY(90deg);
      transition: opacity 0.6s ease, transform 0.6s ease;
    }
    
    .flip-in.visible {
      opacity: 1;
      transform: perspective(400px) rotateY(0deg);
    }
    
    .magnetic-field {
      transition: transform 0.2s ease;
    }
    
    .cursor-trail {
      position: fixed;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(102, 126, 234, 0.8) 0%, transparent 70%);
      pointer-events: none;
      z-index: 9999;
      transition: transform 0.1s ease;
    }
    
    /* Enhanced Modal Animations */
    .animate-fadeIn {
      animation: fadeIn 0.3s ease-out;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    /* Responsive Modal Improvements */
    @media (max-width: 640px) {
      #loginModal .max-w-md {
        max-width: calc(100vw - 2rem);
        margin: 1rem;
      }
      
      #loginModal h3 {
        font-size: 1.25rem;
      }
      
      #loginModal button {
        padding: 0.75rem 1rem;
        font-size: 0.875rem;
      }
    }
    
    /* Enhanced Feature Card Responsiveness */
    @media (max-width: 768px) {
      .feature-card {
        padding: 1.5rem;
      }
      
      .feature-card h4 {
        font-size: 1.125rem;
      }
      
      .feature-card p {
        font-size: 0.875rem;
      }
    }
    
    /* Login State Indicator */
    .login-indicator {
      position: relative;
      overflow: hidden;
    }
    
    .login-indicator::after {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.5s;
    }
    
    .login-indicator:hover::after {
      left: 100%;
    }
    
    /* Success Animation */
    .success-pulse {
      animation: successPulse 0.6s ease-out;
    }
    
    @keyframes successPulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    
    /* AI Assistant Styles - floating button removed */
    
    #ai-assistant-modal .bg-white {
      max-height: 90vh;
    }
    
    #chat-messages {
      scrollbar-width: thin;
      scrollbar-color: #cbd5e0 #f7fafc;
    }
    
    #chat-messages::-webkit-scrollbar {
      width: 6px;
    }
    
    #chat-messages::-webkit-scrollbar-track {
      background: #f7fafc;
    }
    
    #chat-messages::-webkit-scrollbar-thumb {
      background: #cbd5e0;
      border-radius: 3px;
    }
    
    #chat-messages::-webkit-scrollbar-thumb:hover {
      background: #a0aec0;
    }
    
    .quick-action:hover {
      transform: translateY(-1px);
    }
    
    .career-option:hover, .category-option:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    
    /* Mobile responsiveness for AI assistant */
    @media (max-width: 768px) {
      #ai-assistant-modal .max-w-6xl {
        max-width: calc(100vw - 1rem);
        margin: 0.5rem;
      }
      
      #ai-assistant-modal .flex.h-\[75vh\] {
        flex-direction: column;
        height: auto;
        max-height: 80vh;
      }
      
      #ai-assistant-modal .w-full.lg\:w-80 {
        width: 100%;
        max-height: 200px;
        overflow-y: auto;
        order: -1;
      }
      
      /* AI assistant button styles removed */
      
      .quick-action {
        font-size: 0.75rem;
        padding: 0.25rem 0.5rem;
      }
      
      #chat-messages {
        min-height: 300px;
        max-height: 400px;
      }
      
      /* Voice feedback enhancements */
      #voice-feedback {
        animation: slideInUp 0.3s ease-out;
      }
      
      @keyframes slideInUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      
      /* Mobile voice feedback positioning */
      @media (max-width: 768px) {
        #voice-feedback {
          position: fixed !important;
          bottom: 120px !important;
          left: 1rem !important;
          right: 1rem !important;
          margin: 0 !important;
          z-index: 70 !important;
          background: rgba(255, 255, 255, 0.95) !important;
          backdrop-filter: blur(10px) !important;
          border: 1px solid rgba(147, 51, 234, 0.2) !important;
          box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1) !important;
        }
        
        /* Mobile voice control bar adjustments */
        .bg-gradient-to-r.from-purple-100.to-blue-100 {
          position: sticky;
          top: 0;
          z-index: 10;
        }
        
        /* Floating voice button positioning */
        #floating-voice-button {
          bottom: 5rem !important;
          right: 1rem !important;
        }
        
        /* Mobile voice buttons */
        #mobile-voice-toggle, #mobile-speak-toggle {
          font-size: 0.75rem;
          padding: 0.5rem 0.75rem;
        }
      }
      
      /* Ensure chat input is visible on mobile keyboards */
      #ai-assistant-modal .p-3.sm\\:p-6.bg-white.border-t {
        padding-bottom: env(safe-area-inset-bottom, 1rem);
      }
      
      /* Mobile voice button enhancement */
      #voice-input-btn {
        touch-action: manipulation;
        -webkit-tap-highlight-color: transparent;
      }
      
      /* Prevent zoom on input focus on iOS */
      #chat-input {
        font-size: 16px;
      }
      
      /* Floating voice button */
      #floating-voice-button {
        animation: bounceIn 0.5s ease-out;
      }
      
      @keyframes bounceIn {
        0% {
          opacity: 0;
          transform: scale(0.3);
        }
        50% {
          opacity: 1;
          transform: scale(1.05);
        }
        70% {
          transform: scale(0.9);
        }
        100% {
          opacity: 1;
          transform: scale(1);
        }
      }
      
      #floating-voice-btn:active {
        transform: scale(0.95);
      }
      
      /* Always visible voice button for mobile */
      .mobile-voice-fab {
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 60;
        width: 56px;
        height: 56px;
        background: linear-gradient(135deg, #8B5CF6, #3B82F6);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 8px 25px rgba(139, 92, 246, 0.3);
        transition: all 0.3s ease;
        animation: voicePulse 2s infinite;
      }
      
      .mobile-voice-fab:hover {
        transform: scale(1.1);
        box-shadow: 0 12px 35px rgba(139, 92, 246, 0.4);
      }
      
      .mobile-voice-fab.listening {
        background: linear-gradient(135deg, #EF4444, #F97316);
        animation: voiceListening 1s infinite;
      }
      
      @keyframes voicePulse {
        0%, 100% { 
          box-shadow: 0 8px 25px rgba(139, 92, 246, 0.3), 0 0 0 0 rgba(139, 92, 246, 0.4);
        }
        50% { 
          box-shadow: 0 8px 25px rgba(139, 92, 246, 0.3), 0 0 0 10px rgba(139, 92, 246, 0);
        }
      }
      
      @keyframes voiceListening {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.05); }
      }
      
      /* Hide on desktop */
      @media (min-width: 1024px) {
        .mobile-voice-fab {
          display: none;
        }
      }
    }
    
    /* Tablet responsiveness */
    @media (min-width: 769px) and (max-width: 1024px) {
      #ai-assistant-modal .w-full.lg\:w-80 {
        width: 300px;
      }
    }
    
    /* Voice animation effects */
    .voice-listening {
      animation: voicePulse 1.5s ease-in-out infinite;
    }
    
    @keyframes voicePulse {
      0%, 100% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(147, 51, 234, 0.7);
      }
      50% {
        transform: scale(1.05);
        box-shadow: 0 0 0 10px rgba(147, 51, 234, 0);
      }
    }
    
    /* Typing indicator animation */
    .typing-dots {
      display: inline-block;
    }
    
    .typing-dots span {
      display: inline-block;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background-color: #9CA3AF;
      margin: 0 2px;
      animation: typingDots 1.4s infinite ease-in-out;
    }
    
    .typing-dots span:nth-child(1) { animation-delay: -0.32s; }
    .typing-dots span:nth-child(2) { animation-delay: -0.16s; }
    
    @keyframes typingDots {
      0%, 80%, 100% {
        transform: scale(0);
        opacity: 0.5;
      }
      40% {
        transform: scale(1);
        opacity: 1;
      }
    }

    /* Accessibility Improvements */
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }

    .sr-only:focus {
      position: static;
      width: auto;
      height: auto;
      padding: inherit;
      margin: inherit;
      overflow: visible;
      clip: auto;
      white-space: normal;
    }

    /* High contrast mode support */
    .high-contrast {
      filter: contrast(150%);
    }

    .high-contrast .glass,
    .high-contrast .glass-dark {
      background: rgba(0, 0, 0, 0.9) !important;
      border: 2px solid #ffffff !important;
    }

    .high-contrast .text-white\/90,
    .high-contrast .text-white\/70 {
      color: #ffffff !important;
    }

    /* Focus improvements for better visibility */
    *:focus {
      outline: 3px solid #667eea !important;
      outline-offset: 2px !important;
    }

    /* Skip link styling */
    .skip-link {
      position: absolute;
      top: -40px;
      left: 6px;
      background: #667eea;
      color: white;
      padding: 8px 16px;
      border-radius: 4px;
      text-decoration: none;
      font-weight: 500;
      z-index: 1000;
      transition: top 0.3s ease;
    }

    .skip-link:focus {
      top: 6px;
    }

    /* Reduced motion support */
    @media (prefers-reduced-motion: reduce) {
      *,
      *::before,
      *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
      }
    }

    /* High contrast mode detection */
    @media (prefers-contrast: high) {
      .glass,
      .glass-dark {
        background: rgba(0, 0, 0, 0.95) !important;
        border: 2px solid #ffffff !important;
      }
      
      .gradient-text {
        background: none !important;
        color: #ffffff !important;
        -webkit-text-fill-color: unset !important;
      }
    }

    /* Dark mode support */
    @media (prefers-color-scheme: dark) {
      body {
        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        color: #ffffff;
      }
    }

    /* Print styles */
    @media print {
      .fixed,
      .sticky,
      nav,
      .floating-animation,
      .pulse-ring,
      button:not(.print-button) {
        display: none !important;
      }
      
      body {
        background: white !important;
        color: black !important;
      }
      
      .gradient-text {
        background: none !important;
        color: black !important;
        -webkit-text-fill-color: unset !important;
      }
    }
  </style>
</head>
<body class="bg-gradient-to-br from-slate-50 to-blue-50 text-gray-800 overflow-x-hidden">

  <!-- Scroll Progress Indicator -->
  <div id="scroll-indicator" class="scroll-indicator"></div>

  <!-- Enhanced Floating Navbar -->
  <nav id="navbar" class="fixed top-0 left-0 right-0 glass-dark z-50 transition-all duration-500 py-4">
    <div class="max-w-7xl mx-auto px-6 md:px-8">
      <div class="flex items-center justify-between">
        
        <!-- Brand Section -->
        <div class="flex items-center space-x-3 nav-brand">
          <div class="w-10 h-10 bg-gradient-to-r from-purple-500 to-blue-500 rounded-xl flex items-center justify-center shadow-lg">
            <i class="fas fa-graduation-cap text-white text-lg"></i>
          </div>
          <div>
            <h1 class="text-xl md:text-2xl font-bold text-white transition-colors duration-300">NextBloom</h1>
            <p id="navbar-subtitle" class="text-xs text-white/70 transition-all duration-300 opacity-0">AI-Powered Learning Platform</p>
          </div>
        </div>

        <!-- Desktop Navigation Links -->
        <div class="hidden md:flex items-center space-x-8 nav-links nav-menu">
          <a href="#home" class="text-white/90 hover:text-white transition-all duration-300 font-medium relative group">
            Home
            <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-gradient-to-r from-purple-400 to-blue-400 transition-all duration-300 group-hover:w-full"></span>
          </a>
          <a href="#features" class="text-white/90 hover:text-white transition-all duration-300 font-medium relative group">
            Features
            <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-gradient-to-r from-purple-400 to-blue-400 transition-all duration-300 group-hover:w-full"></span>
          </a>
          
          <a href="#about" class="text-white/90 hover:text-white transition-all duration-300 font-medium relative group">
            About
            <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-gradient-to-r from-purple-400 to-blue-400 transition-all duration-300 group-hover:w-full"></span>
          </a>
          <a href="ngo-support.html" class="text-white/90 hover:text-white transition-all duration-300 font-medium relative group">
            NGO Support
            <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-gradient-to-r from-purple-400 to-blue-400 transition-all duration-300 group-hover:w-full"></span>
          </a>
          <a href="#contact" class="text-white/90 hover:text-white transition-all duration-300 font-medium relative group">
            Contact
            <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-gradient-to-r from-purple-400 to-blue-400 transition-all duration-300 group-hover:w-full"></span>
          </a>
          
          <!-- Dashboard link (only shown when logged in) -->
          <a href="dashboard.html" id="nav-dashboard" class="hidden text-white/90 hover:text-white transition-all duration-300 font-medium relative group">
            Dashboard
            <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-gradient-to-r from-purple-400 to-blue-400 transition-all duration-300 group-hover:w-full"></span>
          </a>
          
         
        </div>

        <!-- CTA Button & Mobile Menu -->
        <div class="flex items-center space-x-3">
          
          
          <!-- User Section (shown when logged in) -->
          <div id="user-section" class="hidden md:flex items-center space-x-3">
            <div class="flex items-center space-x-2 bg-white/10 px-3 py-1.5 rounded-full backdrop-blur-sm border border-white/20">
              <i class="fas fa-user-circle text-white text-sm"></i>
              <span class="text-grey text-xs">Welcome  </span>
              <span id="user-display-name" class="text-grey text-xs font-medium"></span>
            </div>
          
            <button id="logout-btn" class="bg-gradient-to-r from-red-500 to-pink-500 text-white px-4 py-2 rounded-full text-sm font-semibold hover:from-red-600 hover:to-pink-600 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105">
              Logout
            </button>
          </div>
          
          <!-- Login/Signup Buttons (shown when not logged in) -->
          <div id="auth-buttons" class="hidden md:flex items-center space-x-3">
            <a href="login.html" class="bg-gradient-to-r from-green-500 to-green-600 text-white px-3 py-1.5 sm:px-4 sm:py-2 rounded-full text-xs sm:text-sm font-semibold hover:from-green-400 hover:to-green-600 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105">
              Login
            </a>
            <a href="signup_new.html" class="cta-button bg-gradient-to-r from-purple-500 to-blue-500 text-white px-3 py-1.5 sm:px-4 sm:py-2 rounded-full text-xs sm:text-sm font-semibold hover:from-purple-600 hover:to-blue-600 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 inline-block">
              Get Started
            </a>
          </div>
          
          <!-- Mobile Menu Button -->
          <button id="mobile-menu-btn" class="md:hidden text-white p-2 rounded-lg hover:bg-white/10 transition-colors duration-300 mobile-menu-btn">
            <i class="fas fa-bars text-xl"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- Mobile Menu -->
    <div id="mobile-menu" class="mobile-menu md:hidden absolute top-full left-0 right-0 bg-white/95 backdrop-blur-lg shadow-xl">
      <div class="px-6 py-4 space-y-4">
        <a href="#home" class="block text-gray-800 font-medium py-2 hover:text-purple-600 transition-colors duration-300">
          <i class="fas fa-home w-5 mr-3"></i>Home
        </a>
        <a href="#features" class="block text-gray-800 font-medium py-2 hover:text-purple-600 transition-colors duration-300">
          <i class="fas fa-star w-5 mr-3"></i>Features
        </a>
      
        <a href="#about" class="block text-gray-800 font-medium py-2 hover:text-purple-600 transition-colors duration-300">
          <i class="fas fa-info-circle w-5 mr-3"></i>About
        </a>
        <a href="ngo-support.html" class="block text-gray-800 font-medium py-2 hover:text-purple-600 transition-colors duration-300">
          <i class="fas fa-hands-helping w-5 mr-3"></i>NGO Support
        </a>
        <a href="#contact" class="block text-gray-800 font-medium py-2 hover:text-purple-600 transition-colors duration-300">
          <i class="fas fa-envelope w-5 mr-3"></i>Contact
        </a>
        
        <!-- Mobile Auth Buttons (shown when NOT logged in) -->
        <div id="mobile-auth-buttons" class="space-y-3 pt-2 border-t border-gray-200">
          <a href="login.html" class="block text-gray-800 font-medium py-3 px-4 hover:text-purple-600 transition-colors duration-300 border border-gray-200 rounded-lg hover:bg-purple-50">
            <i class="fas fa-sign-in-alt w-5 mr-3"></i>Login
          </a>
          <a href="signup_new.html" class="w-full bg-gradient-to-r from-purple-500 to-blue-500 text-white px-6 py-3 rounded-full font-semibold hover:from-purple-600 hover:to-blue-600 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 inline-block text-center">
            <i class="fas fa-rocket mr-2"></i>Get Started
          </a>
        </div>
        
        <!-- Mobile User Section (shown when logged in) -->
        <div id="mobile-user-section" class="hidden space-y-3 pt-2 border-t border-gray-200">
          <div class="flex items-center space-x-2 py-2 bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg px-3">
            <i class="fas fa-user-circle text-purple-600 text-lg w-5"></i>
            <span class="text-gray-600 text-sm">Welcome </span>
            <span id="mobile-user-display-name" class="text-purple-700 font-medium text-sm"></span>
          </div>
          <a href="dashboard.html" class="block text-gray-800 font-medium py-2 hover:text-purple-600 transition-colors duration-300">
            <i class="fas fa-tachometer-alt w-5 mr-3"></i>Dashboard
          </a>
          <button id="mobile-logout-btn" class="w-full bg-gradient-to-r from-red-500 to-pink-500 text-white px-6 py-3 rounded-full font-semibold hover:from-red-600 hover:to-pink-600 transition-all duration-300 shadow-lg">
            <i class="fas fa-sign-out-alt mr-2"></i>Logout
          </button>
        </div>
      </div>
    </div>
  </nav>

  <!-- Hero Section -->
  <section id="home" class="hero-bg min-h-screen flex flex-col items-center justify-center text-center px-4 relative">
    <div class="relative z-10 max-w-4xl mx-auto">
      <!-- Floating Elements -->
      <div class="absolute -top-20 -left-20 w-40 h-40 bg-white/10 rounded-full floating-animation"></div>
      <div class="absolute -bottom-20 -right-20 w-60 h-60 bg-white/5 rounded-full floating-animation" style="animation-delay: -3s;"></div>
      
      <!-- Dynamic Text Content -->
      <div class="mb-8" data-sr>
        <div id="dynamic-badge" class="inline-block bg-white/20 backdrop-blur-sm border border-white/30 rounded-full px-6 py-2 mb-6 opacity-0 transform translate-y-4 transition-all duration-1000">
          <span class="text-white/90 text-sm font-medium">🚀 Transforming Education with AI</span>
        </div>
        
        <h2 class="text-3xl sm:text-4xl md:text-6xl lg:text-7xl font-bold leading-tight mb-4 sm:mb-6 text-white">
          Empowering Every
          <span class="block bg-gradient-to-r from-yellow-300 to-orange-300 bg-clip-text text-transparent">
            Learner
          </span>
        </h2>
        
        <p id="hero-description" class="text-lg md:text-xl mb-8 max-w-2xl mx-auto text-white/90 leading-relaxed">
          Your voice is your gateway to skills, growth, and opportunity — start learning the way you live with AI-powered personalized education.
        </p>
        
        <!-- Scroll-triggered additional text -->
        <div id="scroll-text" class="opacity-0 transform translate-y-4 transition-all duration-1000 delay-500">
          <p class="text-white/80 text-base max-w-xl mx-auto">
            Join thousands of learners who've discovered their potential through our innovative dropout recovery platform.
          </p>
        </div>
      </div>

      <!-- Animated Voice CTA Button -->
      <div class="relative inline-block" data-sr>
        <div class="absolute inset-0 rounded-full bg-white/20 pulse-ring"></div>
        <div class="absolute inset-0 rounded-full bg-white/10 pulse-ring" style="animation-delay: 0.5s;"></div>
      <a href="standalone_chatbot.html">
        <button class="voice-button relative bg-white text-purple-600 px-8 py-4 rounded-full shadow-2xl hover:shadow-3xl transition-all duration-300 font-semibold text-lg flex items-center space-x-3 group">
          <div class="relative">
            <i class="fas fa-microphone text-2xl mic-animation"></i>
            <div class="ripple"></div>
          </div>
          <span>Start Learning with Voice</span>
          <i class="fas fa-arrow-right group-hover:translate-x-1 transition-transform duration-300"></i>
        </button></a>
      </div>

      <!-- Stats -->
      <div class="mt-16 grid grid-cols-1 md:grid-cols-3 gap-8 max-w-2xl mx-auto" data-sr>
        <div class="text-center">
          <div class="text-3xl font-bold text-white">10K+</div>
          <div class="text-white/70 text-sm">Students Helped</div>
        </div>
        <div class="text-center">
          <div class="text-3xl font-bold text-white">95%</div>
          <div class="text-white/70 text-sm">Success Rate</div>
        </div>
        <div class="text-center">
          <div class="text-3xl font-bold text-white">24/7</div>
          <div class="text-white/70 text-sm">AI Support</div>
        </div>
      </div>
    </div>
  </section>

  

        

  <!-- Feature Grid -->
  <section id="features" class="py-20 md:py-32 px-6 bg-white relative">
    <div class="max-w-7xl mx-auto">
      <div class="text-center mb-16" data-sr>
        <h3 class="text-3xl md:text-4xl font-bold mb-4 gradient-text">
           Explore NextBloom Features
        </h3>
        <p class="text-gray-600 text-lg max-w-2xl mx-auto">
          Discover powerful tools designed to transform your learning journey with AI-powered personalization
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        
        <!-- 24/7 Mentor Sessions -->
        <div class="feature-card glass p-8 rounded-2xl shadow-lg group cursor-pointer relative overflow-hidden" data-sr onclick="checkLoginAndRedirect('sessions.html')">
          <div class="absolute top-2 right-2">
            <span class="bg-gradient-to-r from-orange-400 to-red-500 text-white text-xs px-2 py-1 rounded-full font-medium">
              <i class="fas fa-lock mr-1"></i>Login Required
            </span>
          </div>
          <div class="flex items-center justify-between mb-4">
            <div class="w-12 h-12 bg-gradient-to-r from-green-400 to-blue-500 rounded-xl flex items-center justify-center relative">
              <i class="fas fa-video text-white text-xl"></i>
              <div class="absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full animate-pulse"></div>
            </div>
            <i class="fas fa-arrow-right text-gray-400 group-hover:text-purple-500 group-hover:translate-x-1 transition-all duration-300"></i>
          </div>
          <h4 class="text-xl font-semibold text-gray-800 mb-2">🎥 24/7 Mentor Sessions</h4>
          <p class="text-gray-600 text-sm leading-relaxed">Book 1-on-1 video calls with expert mentors for personalized career guidance, skill development, and learning support anytime.</p>
          <div class="mt-4 flex items-center text-xs text-green-600">
            <div class="w-2 h-2 bg-green-400 rounded-full mr-2 animate-pulse"></div>
            <span>200+ Mentors Available Now</span>
          </div>
        </div>

        <!-- Dashboard -->
        <a href="dashboard.html" class="feature-card glass p-8 rounded-2xl shadow-lg group" data-sr>
          <div class="flex items-center justify-between mb-4">
            <div class="w-12 h-12 bg-gradient-to-r from-purple-400 to-pink-500 rounded-xl flex items-center justify-center">
              <i class="fas fa-chart-line text-white text-xl"></i>
            </div>
            <i class="fas fa-arrow-right text-gray-400 group-hover:text-purple-500 group-hover:translate-x-1 transition-all duration-300"></i>
          </div>
          <h4 class="text-xl font-semibold text-gray-800 mb-2">📊 Smart Dashboard</h4>
          <p class="text-gray-600 text-sm leading-relaxed">Track your skills, monitor goals, and visualize daily progress with intelligent analytics and insights.</p>
        </a>

        <!-- AI Voice Assistant -->
        <a href="standalone_chatbot.html" class="feature-card glass p-8 rounded-2xl shadow-lg group" data-sr>
          <div class="flex items-center justify-between mb-4">
            <div class="w-12 h-12 bg-gradient-to-r from-red-400 to-yellow-500 rounded-xl flex items-center justify-center">
              <i class="fas fa-microphone text-white text-xl"></i>
            </div>
            <i class="fas fa-arrow-right text-gray-400 group-hover:text-purple-500 group-hover:translate-x-1 transition-all duration-300"></i>
          </div>
          <h4 class="text-xl font-semibold text-gray-800 mb-2">🎙️ AI Voice Assistant</h4>
          <p class="text-gray-600 text-sm leading-relaxed">Talk naturally to get personalized learning suggestions, instant help, and adaptive course recommendations.</p>
        </a>

        <!-- Learning Hub -->
        <a href="learning.html" class="feature-card glass p-8 rounded-2xl shadow-lg group" data-sr>
          <div class="flex items-center justify-between mb-4">
            <div class="w-12 h-12 bg-gradient-to-r from-indigo-400 to-cyan-500 rounded-xl flex items-center justify-center">
              <i class="fas fa-book-open text-white text-xl"></i>
            </div>
            <i class="fas fa-arrow-right text-gray-400 group-hover:text-purple-500 group-hover:translate-x-1 transition-all duration-300"></i>
          </div>
          <h4 class="text-xl font-semibold text-gray-800 mb-2">📚 Learning Hub</h4>
          <p class="text-gray-600 text-sm leading-relaxed">Access curated content, interactive lessons, and skill-building resources tailored to your learning style.</p>
        </a>

        <!-- Resume Builder -->
        <a href="resume-builder.html" class="feature-card glass p-8 rounded-2xl shadow-lg group" data-sr>
          <div class="flex items-center justify-between mb-4">
            <div class="w-12 h-12 bg-gradient-to-r from-orange-400 to-red-500 rounded-xl flex items-center justify-center">
              <i class="fas fa-file-alt text-white text-xl"></i>
            </div>
            <i class="fas fa-arrow-right text-gray-400 group-hover:text-purple-500 group-hover:translate-x-1 transition-all duration-300"></i>
          </div>
          <h4 class="text-xl font-semibold text-gray-800 mb-2">📄 Resume Builder</h4>
          <p class="text-gray-600 text-sm leading-relaxed">Build a professional portfolio showcasing your life learning, skills, and achievements with AI assistance.</p>
        </a>

        <!-- Daily Missions -->
        <a href="mission.html" class="feature-card glass p-8 rounded-2xl shadow-lg group" data-sr>
          <div class="flex items-center justify-between mb-4">
            <div class="w-12 h-12 bg-gradient-to-r from-teal-400 to-green-500 rounded-xl flex items-center justify-center">
              <i class="fas fa-target text-white text-xl"></i>
            </div>
            <i class="fas fa-arrow-right text-gray-400 group-hover:text-purple-500 group-hover:translate-x-1 transition-all duration-300"></i>
          </div>
          <h4 class="text-xl font-semibold text-gray-800 mb-2">🎯 Daily Missions</h4>
          <p class="text-gray-600 text-sm leading-relaxed">Complete engaging micro-tasks and challenges to keep your progress fun, active, and consistently growing.</p>
        </a>

      </div>
    </div>
  </section>

  <!-- How It Works Section -->
  <section class="py-20 md:py-32 bg-white relative overflow-hidden">
    <div class="absolute inset-0 bg-gradient-to-br from-purple-50 to-blue-50 opacity-50"></div>
    <div class="max-w-6xl mx-auto px-6 relative z-10">
      <div class="text-center mb-16" data-sr>
        <div class="inline-block bg-gradient-to-r from-purple-100 to-blue-100 text-purple-600 px-6 py-3 rounded-full text-sm font-medium mb-6">
          <i class="fas fa-cogs mr-2"></i>How It Works
        </div>
        <h3 class="text-3xl md:text-4xl font-bold mb-6 text-gray-800">
          Your Learning Journey in <span class="text-shimmer">3 Simple Steps</span>
        </h3>
        <p class="text-gray-600 text-lg max-w-2xl mx-auto">
          Experience the future of education with our AI-powered platform designed for dropout recovery
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-16">
        <div class="text-center group" data-sr>
          <div class="relative mb-6">
            <div class="w-20 h-20 bg-gradient-to-r from-green-400 to-blue-500 rounded-full flex items-center justify-center mx-auto morphing-blob">
              <i class="fas fa-microphone text-white text-2xl"></i>
            </div>
            <div class="absolute -top-2 -right-2 w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center text-white font-bold text-sm">
              1
            </div>
          </div>
          <h4 class="text-xl font-semibold mb-3 text-gray-800">Speak Your Goals</h4>
          <p class="text-gray-600 leading-relaxed">
            Tell our AI assistant about your learning objectives, interests, and preferred pace using natural voice commands.
          </p>
        </div>

        <div class="text-center group" data-sr>
          <div class="relative mb-6">
            <div class="w-20 h-20 bg-gradient-to-r from-purple-400 to-pink-500 rounded-full flex items-center justify-center mx-auto morphing-blob" style="animation-delay: -2s;">
              <i class="fas fa-brain text-white text-2xl"></i>
            </div>
            <div class="absolute -top-2 -right-2 w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center text-white font-bold text-sm">
              2
            </div>
          </div>
          <h4 class="text-xl font-semibold mb-3 text-gray-800">AI Creates Your Path</h4>
          <p class="text-gray-600 leading-relaxed">
            Our intelligent system analyzes your profile and creates a personalized learning roadmap tailored just for you.
          </p>
        </div>

        <div class="text-center group" data-sr>
          <div class="relative mb-6">
            <div class="w-20 h-20 bg-gradient-to-r from-orange-400 to-red-500 rounded-full flex items-center justify-center mx-auto morphing-blob" style="animation-delay: -4s;">
              <i class="fas fa-rocket text-white text-2xl"></i>
            </div>
            <div class="absolute -top-2 -right-2 w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center text-white font-bold text-sm">
              3
            </div>
          </div>
          <h4 class="text-xl font-semibold mb-3 text-gray-800">Learn & Achieve</h4>
          <p class="text-gray-600 leading-relaxed">
            Start your interactive learning journey with real-time feedback, progress tracking, and continuous support.
          </p>
        </div>
      </div>

      <!-- Interactive Demo Preview -->
      <div class="bg-gradient-to-r from-gray-900 to-gray-800 rounded-3xl p-8 md:p-12 text-white relative overflow-hidden" data-sr>
        <div class="absolute inset-0 bg-gradient-to-r from-purple-600/20 to-blue-600/20"></div>
        <div class="relative z-10">
          <div class="text-center mb-8">
            <h4 class="text-2xl md:text-3xl font-bold mb-4 text-white">See NextBloom in Action</h4>
            <p class="text-gray-300 text-lg">Experience our voice-powered learning interface</p>
          </div>
          
          <div class="bg-black/30 rounded-2xl p-6 backdrop-blur-sm border border-white/10">
            <div class="flex items-center space-x-3 mb-4">
              <div class="w-3 h-3 bg-red-500 rounded-full"></div>
              <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
              <div class="w-3 h-3 bg-green-500 rounded-full"></div>
              <span class="text-gray-400 text-sm ml-4">NextBloom Voice Assistant</span>
            </div>
            
            <div class="space-y-4">
              <div class="flex items-start space-x-3">
                <div class="w-8 h-8 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full flex items-center justify-center flex-shrink-0">
                  <i class="fas fa-user text-white text-xs"></i>
                </div>
                <div class="bg-blue-600 rounded-2xl rounded-tl-sm px-4 py-2 max-w-xs">
                  <p class="text-sm">"I want to learn web development but I'm a complete beginner"</p>
                </div>
              </div>
              
              <div class="flex items-start space-x-3 justify-end">
                <div class="bg-gray-700 rounded-2xl rounded-tr-sm px-4 py-2 max-w-md">
                  <p class="text-sm">Perfect! I've created a personalized web development path for you. We'll start with HTML basics and gradually build up to full-stack development. Would you like to begin with a 5-minute interactive lesson?</p>
                </div>
                <div class="w-8 h-8 bg-gradient-to-r from-green-500 to-teal-500 rounded-full flex items-center justify-center flex-shrink-0">
                  <i class="fas fa-robot text-white text-xs"></i>
                </div>
              </div>
            </div>
            
            <div class="mt-6 flex items-center justify-center">
              <a href="standalone_chatbot.html"><button class="bg-gradient-to-r from-purple-600 to-blue-600 text-white px-6 py-3 rounded-full font-semibold hover:shadow-lg transition-all duration-300 pulse-glow">
                <i class="fas fa-play mr-2"></i>Try Interactive Demo
              </button></a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Success Stories Section -->
  <section class="py-20 md:py-32 bg-gradient-to-br from-purple-50 to-blue-50 relative">
    <div class="max-w-6xl mx-auto px-6">
      <div class="text-center mb-16" data-sr>
        <div class="inline-block bg-gradient-to-r from-green-100 to-teal-100 text-green-600 px-6 py-3 rounded-full text-sm font-medium mb-6">
          <i class="fas fa-star mr-2"></i>Success Stories
        </div>
        <h3 class="text-3xl md:text-4xl font-bold mb-6 text-gray-800">
          Real People, Real <span class="text-shimmer">Transformations</span>
        </h3>
        <p class="text-gray-600 text-lg max-w-2xl mx-auto">
          Discover how NextBloom has helped thousands of learners restart their educational journey
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        <div class="bg-white rounded-2xl p-6 shadow-lg hover:shadow-2xl transition-all duration-300 group" data-sr>
          <div class="flex items-center space-x-4 mb-4">
            <div class="w-12 h-12 bg-gradient-to-r from-purple-400 to-pink-500 rounded-full flex items-center justify-center">
              <span class="text-white font-bold">M</span>
            </div>
            <div>
              <h4 class="font-semibold text-gray-800">Maria Rodriguez</h4>
              <p class="text-gray-500 text-sm">High School Dropout → Web Developer</p>
            </div>
          </div>
          <p class="text-gray-600 mb-4 leading-relaxed">
            "I dropped out at 16, but NextBloom gave me a second chance. The voice assistant made learning feel natural, and now I'm working as a frontend developer!"
          </p>
          <div class="flex items-center space-x-1">
            <i class="fas fa-star text-yellow-400"></i>
            <i class="fas fa-star text-yellow-400"></i>
            <i class="fas fa-star text-yellow-400"></i>
            <i class="fas fa-star text-yellow-400"></i>
            <i class="fas fa-star text-yellow-400"></i>
            <span class="text-gray-500 text-sm ml-2">6 months ago</span>
          </div>
        </div>

        <div class="bg-white rounded-2xl p-6 shadow-lg hover:shadow-2xl transition-all duration-300 group" data-sr>
          <div class="flex items-center space-x-4 mb-4">
            <div class="w-12 h-12 bg-gradient-to-r from-blue-400 to-cyan-500 rounded-full flex items-center justify-center">
              <span class="text-white font-bold">J</span>
            </div>
            <div>
              <h4 class="font-semibold text-gray-800">James Thompson</h4>
              <p class="text-gray-500 text-sm">College Dropout → Data Analyst</p>
            </div>
          </div>
          <p class="text-gray-600 mb-4 leading-relaxed">
            "The personalized learning path was exactly what I needed. I could learn at my own pace while working full-time. Now I have my dream job!"
          </p>
          <div class="flex items-center space-x-1">
            <i class="fas fa-star text-yellow-400"></i>
            <i class="fas fa-star text-yellow-400"></i>
            <i class="fas fa-star text-yellow-400"></i>
            <i class="fas fa-star text-yellow-400"></i>
            <i class="fas fa-star text-yellow-400"></i>
            <span class="text-gray-500 text-sm ml-2">4 months ago</span>
          </div>
        </div>

        <div class="bg-white rounded-2xl p-6 shadow-lg hover:shadow-2xl transition-all duration-300 group" data-sr>
          <div class="flex items-center space-x-4 mb-4">
            <div class="w-12 h-12 bg-gradient-to-r from-green-400 to-teal-500 rounded-full flex items-center justify-center">
              <span class="text-white font-bold">S</span>
            </div>
            <div>
              <h4 class="font-semibold text-gray-800">Sarah Kim</h4>
              <p class="text-gray-500 text-sm">Career Changer → UX Designer</p>
            </div>
          </div>
          <p class="text-gray-600 mb-4 leading-relaxed">
            "At 35, I thought it was too late to change careers. NextBloom proved me wrong. The AI mentor guided me every step of the way!"
          </p>
          <div class="flex items-center space-x-1">
            <i class="fas fa-star text-yellow-400"></i>
            <i class="fas fa-star text-yellow-400"></i>
            <i class="fas fa-star text-yellow-400"></i>
            <i class="fas fa-star text-yellow-400"></i>
            <i class="fas fa-star text-yellow-400"></i>
            <span class="text-gray-500 text-sm ml-2">8 months ago</span>
          </div>
        </div>
      </div>

      <!-- Achievement Stats -->
      <div class="mt-16 bg-white rounded-3xl p-8 md:p-12 shadow-xl" data-sr>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-8 text-center">
          <div class="group">
            <div class="text-3xl md:text-4xl font-bold text-purple-600 mb-2 counter" data-target="15000">0</div>
            <p class="text-gray-600 font-medium">Lives Transformed</p>
          </div>
          <div class="group">
            <div class="text-3xl md:text-4xl font-bold text-blue-600 mb-2 counter" data-target="89">0%</div>
            <p class="text-gray-600 font-medium">Job Placement Rate</p>
          </div>
          <div class="group">
            <div class="text-3xl md:text-4xl font-bold text-green-600 mb-2 counter" data-target="500">0+</div>
            <p class="text-gray-600 font-medium">Partner Companies</p>
          </div>
          <div class="group">
            <div class="text-3xl md:text-4xl font-bold text-orange-600 mb-2 counter" data-target="24">0/7</div>
            <p class="text-gray-600 font-medium">AI Support</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- About Section -->
  <section id="about" class="py-20 md:py-32 bg-white relative overflow-hidden">
    <div class="absolute inset-0">
      <div class="absolute top-20 left-10 w-72 h-72 bg-purple-200 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-pulse"></div>
      <div class="absolute top-40 right-10 w-72 h-72 bg-yellow-200 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-pulse" style="animation-delay: 2s;"></div>
      <div class="absolute -bottom-8 left-20 w-72 h-72 bg-pink-200 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-pulse" style="animation-delay: 4s;"></div>
    </div>
    
    <div class="max-w-6xl mx-auto px-6 relative z-10">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
        <div data-sr>
          <div class="inline-block bg-purple-100 text-purple-600 px-4 py-2 rounded-full text-sm font-medium mb-6">
            About NextBloom
          </div>
          <h3 class="text-3xl md:text-4xl font-bold mb-6 text-gray-800">
            Breaking Barriers in <span class="text-shimmer">Education</span>
          </h3>
          <p class="text-gray-600 text-lg mb-6 leading-relaxed">
            NextBloom is more than just a learning platform—it's a movement to democratize education and provide second chances to those who need them most.
          </p>
          <div class="space-y-4">
            <div class="flex items-start space-x-3 group">
              <div class="w-6 h-6 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0 mt-1 group-hover:scale-110 transition-transform duration-300">
                <i class="fas fa-check text-white text-xs"></i>
              </div>
              <p class="text-gray-700">AI-powered personalized learning paths</p>
            </div>
            <div class="flex items-start space-x-3 group">
              <div class="w-6 h-6 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0 mt-1 group-hover:scale-110 transition-transform duration-300">
                <i class="fas fa-check text-white text-xs"></i>
              </div>
              <p class="text-gray-700">Voice-first interaction for accessibility</p>
            </div>
            <div class="flex items-start space-x-3 group">
              <div class="w-6 h-6 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0 mt-1 group-hover:scale-110 transition-transform duration-300">
                <i class="fas fa-check text-white text-xs"></i>
              </div>
              <p class="text-gray-700">Real-world skill development focus</p>
            </div>
          </div>
        </div>
        <div class="relative" data-sr>
          <div class="bg-gradient-to-r from-purple-500 to-blue-500 rounded-2xl p-8 text-white transform hover:scale-105 transition-transform duration-300">
            <div class="grid grid-cols-2 gap-6">
              <div class="text-center group">
                <div class="text-3xl font-bold mb-2 counter" data-target="85">0%</div>
                <div class="text-sm opacity-90">Completion Rate</div>
              </div>
              <div class="text-center group">
                <div class="text-3xl font-bold mb-2 counter" data-target="12">0K+</div>
                <div class="text-sm opacity-90">Active Learners</div>
              </div>
              <div class="text-center group">
                <div class="text-3xl font-bold mb-2">4.9★</div>
                <div class="text-sm opacity-90">User Rating</div>
              </div>
              <div class="text-center group">
                <div class="text-3xl font-bold mb-2">24/7</div>
                <div class="text-sm opacity-90">AI Support</div>
              </div>
            </div>
          </div>
          
          <!-- Floating elements around the stats card -->
          <div class="absolute -top-4 -left-4 w-8 h-8 bg-yellow-400 rounded-full animate-bounce"></div>
          <div class="absolute -top-2 -right-6 w-6 h-6 bg-pink-400 rounded-full animate-bounce" style="animation-delay: 0.5s;"></div>
          <div class="absolute -bottom-4 -left-2 w-10 h-10 bg-green-400 rounded-full animate-bounce" style="animation-delay: 1s;"></div>
          <div class="absolute -bottom-2 -right-4 w-7 h-7 bg-blue-400 rounded-full animate-bounce" style="animation-delay: 1.5s;"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- Call to Action Section -->
  <section id="contact" class="py-20 bg-gradient-to-r from-purple-600 to-blue-600 text-white text-center" data-sr>
    <div class="max-w-4xl mx-auto px-6">
      <h3 class="text-3xl md:text-4xl font-bold mb-6 text-white">Ready to Transform Your Learning?</h3>
      <p class="text-xl mb-8 opacity-90">Join thousands of learners who've already started their journey with NextBloom</p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a href="signup.html" class="bg-white text-purple-600 px-8 py-4 rounded-full font-semibold hover:bg-gray-100 transition-colors duration-300 inline-block">
          Get Started Free
        </a>
        <button class="border-2 border-white text-white px-8 py-4 rounded-full font-semibold hover:bg-white hover:text-purple-600 transition-all duration-300">
          Watch Demo
        </button>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-gray-900 text-white py-12">
    <div class="max-w-6xl mx-auto px-6">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
        <div class="col-span-1 md:col-span-2">
          <div class="flex items-center space-x-2 mb-4">
            <div class="w-8 h-8 bg-gradient-to-r from-purple-500 to-blue-500 rounded-lg flex items-center justify-center">
              <i class="fas fa-graduation-cap text-white text-sm"></i>
            </div>
            <h1 class="text-xl font-bold text-white">NextBloom</h1>
          </div>
          <p class="text-gray-400 mb-4 max-w-md">
            Empowering learners worldwide with AI-powered education technology. Breaking barriers, building futures.
          </p>
          <div class="flex space-x-4">
            <a href="#" class="text-gray-400 hover:text-white transition-colors duration-300">
              <i class="fab fa-twitter text-xl"></i>
            </a>
            <a href="#" class="text-gray-400 hover:text-white transition-colors duration-300">
              <i class="fab fa-linkedin text-xl"></i>
            </a>
            <a href="#" class="text-gray-400 hover:text-white transition-colors duration-300">
              <i class="fab fa-github text-xl"></i>
            </a>
          </div>
        </div>
        <div>
          <h4 class="font-semibold mb-4">Platform</h4>
          <ul class="space-y-2 text-gray-400">
            <li><a href="#" class="hover:text-white transition-colors duration-300">Features</a></li>
            <li><a href="terms.html" class="hover:text-white transition-colors duration-300">Terms & Conditions</a></li>
            <li><a href="privacy.html" class="hover:text-white transition-colors duration-300">Privacy Policy</a></li>
          </ul>
        </div>
        <div>
          <h4 class="font-semibold mb-4">Support</h4>
          <ul class="space-y-2 text-gray-400">
            <li><a href="faq.html" class="hover:text-white transition-colors duration-300">FAQs</a></li>
            <li><a href="contact.html" class="hover:text-white transition-colors duration-300">Contact us</a></li>

          </ul>
        </div>
      </div>
      <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
        <p>© 2025 NextBloom. Built for Hackathons. Powered by Education.</p>
      </div>
    </div>
  </footer>

 

  <script>
    // ScrollReveal Animations
    ScrollReveal().reveal('[data-sr]', {
      distance: '50px',
      origin: 'bottom',
      duration: 1000,
      easing: 'ease-out',
      interval: 150,
      reset: false
    });

    // Login Check Function
    function checkLoginAndRedirect(targetPage) {
      // Check if user is logged in (you can modify this logic based on your authentication system)
      const isLoggedIn = localStorage.getItem('userLoggedIn') === 'true' || 
                        sessionStorage.getItem('userLoggedIn') === 'true' ||
                        getCookie('userLoggedIn') === 'true';
      
      if (isLoggedIn) {
        // User is logged in, redirect to target page
        window.location.href = targetPage;
      } else {
        // User is not logged in, show login modal or redirect to login page
        showLoginModal();
      }
    }

    // Function to get cookie value
    function getCookie(name) {
      const value = `; ${document.cookie}`;
      const parts = value.split(`; ${name}=`);
      if (parts.length === 2) return parts.pop().split(';').shift();
      return null;
    }

    // Show Login Modal Function
    function showLoginModal() {
      // Prevent multiple modals
      if (document.getElementById('loginModal')) {
        return;
      }
      
      // Create modal HTML
      const modalHTML = `
        <div id="loginModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 backdrop-blur-sm animate-fadeIn">
          <div class="bg-white rounded-2xl p-6 sm:p-8 max-w-md w-full mx-4 shadow-2xl transform scale-95 transition-all duration-300" id="modalContent">
            <div class="text-center mb-6">
              <div class="w-16 h-16 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse">
                <i class="fas fa-lock text-white text-2xl"></i>
              </div>
              <h3 class="text-xl sm:text-2xl font-bold text-gray-800 mb-2">🔐 Login Required</h3>
              <p class="text-gray-600 text-sm sm:text-base">Please log in or sign up to access 24/7 Mentor Sessions</p>
            </div>
            
            <div class="space-y-4">
              <button onclick="redirectToLogin()" class="w-full bg-gradient-to-r from-purple-500 to-blue-500 text-white py-3 px-6 rounded-xl font-semibold hover:from-purple-600 hover:to-blue-600 transition-all duration-300 transform hover:scale-105">
                <i class="fas fa-sign-in-alt mr-2"></i>Login to Your Account
              </button>
              
              <button onclick="redirectToSignup()" class="w-full border-2 border-purple-500 text-purple-500 py-3 px-6 rounded-xl font-semibold hover:bg-purple-500 hover:text-white transition-all duration-300">
                <i class="fas fa-user-plus mr-2"></i>Create New Account
              </button>
              
              <button onclick="closeLoginModal()" class="w-full text-gray-500 py-2 px-6 rounded-xl font-medium hover:text-gray-700 transition-colors">
                <i class="fas fa-times mr-2"></i>Cancel
              </button>
            </div>
            
            <!-- Info -->
            <div class="mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg">
              <p class="text-xs text-blue-700 text-center">
                <i class="fas fa-info-circle mr-1"></i>
                You need to create an account or login to access mentor sessions
              </p>
            </div>
          </div>
        </div>
      `;
      
      // Add modal to page
      document.body.insertAdjacentHTML('beforeend', modalHTML);
      
      // Add animation
      setTimeout(() => {
        const modalContent = document.getElementById('modalContent');
        if (modalContent) {
          modalContent.style.transform = 'scale(1)';
        }
      }, 10);
      
      // Prevent body scroll
      document.body.style.overflow = 'hidden';
    }

    // Close Login Modal
    function closeLoginModal() {
      const modal = document.getElementById('loginModal');
      if (modal) {
        const modalContent = modal.querySelector('#modalContent');
        if (modalContent) {
          modalContent.style.transform = 'scale(0.95)';
        }
        modal.style.opacity = '0';
        
        setTimeout(() => {
          if (modal.parentElement) {
            modal.remove();
          }
          // Restore body scroll
          document.body.style.overflow = '';
        }, 300);
      }
    }

    // Redirect to Login Page
    function redirectToLogin() {
      // Store the intended destination
      sessionStorage.setItem('redirectAfterLogin', 'sessions.html');
      window.location.href = 'login.html'; // Change this to your actual login page
    }

    // Redirect to Signup Page
    function redirectToSignup() {
      // Store the intended destination
      sessionStorage.setItem('redirectAfterLogin', 'sessions.html');
      window.location.href = 'signup.html'; // Change this to your actual signup page
    }

    // Close modal when clicking outside - Fixed with proper event delegation
    document.addEventListener('click', function(e) {
      const modal = document.getElementById('loginModal');
      if (modal && e.target === modal) {
        closeLoginModal();
      }
    });

    // Real Login System - Only works with actual authentication
    function handleSuccessfulLogin(userData) {
      // This function should be called after successful authentication
      localStorage.setItem('userLoggedIn', 'true');
      localStorage.setItem('userName', userData.name || 'User');
      localStorage.setItem('userEmail', userData.email || '');
      
      // Show success notification
      showNotification('✅ Successfully logged in! Welcome back.', 'success');
      
      // Update UI to show logged in state
      updateLoginState();
      
      // Check if there's a redirect after login
      const redirectUrl = sessionStorage.getItem('redirectAfterLogin');
      if (redirectUrl) {
        sessionStorage.removeItem('redirectAfterLogin');
        setTimeout(() => {
          window.location.href = redirectUrl;
        }, 1500);
      }
    }

    // Update UI based on login state
    function updateLoginState() {
      const isLoggedIn = localStorage.getItem('userLoggedIn') === 'true';
      const userName = localStorage.getItem('userName') || 'User';
      
      // Update navbar if user is logged in
      if (isLoggedIn) {
        // Keep navbar brand clean - username removed for better design
        
        // Update session card to show unlocked state
        const sessionCard = document.querySelector('[onclick*="sessions.html"]');
        if (sessionCard) {
          const lockBadge = sessionCard.querySelector('.bg-gradient-to-r.from-orange-400');
          if (lockBadge) {
            lockBadge.innerHTML = '<i class="fas fa-check mr-1"></i>Access Granted';
            lockBadge.className = 'bg-gradient-to-r from-green-400 to-green-500 text-white text-xs px-2 py-1 rounded-full font-medium';
          }
        }
      }
    }

    // Logout function
    function logout() {
      localStorage.removeItem('userLoggedIn');
      localStorage.removeItem('userName');
      localStorage.removeItem('userEmail');
      sessionStorage.clear();
      
      showNotification('👋 Successfully logged out!', 'info');
      updateLoginState();
      
      // Navbar stays clean - no reset needed
      
      // Reset session card
      const sessionCard = document.querySelector('[onclick*="sessions.html"]');
      if (sessionCard) {
        const lockBadge = sessionCard.querySelector('.bg-gradient-to-r');
        if (lockBadge) {
          lockBadge.innerHTML = '<i class="fas fa-lock mr-1"></i>Login Required';
          lockBadge.className = 'bg-gradient-to-r from-orange-400 to-red-500 text-white text-xs px-2 py-1 rounded-full font-medium';
        }
      }
    }

    // Enhanced notification system with accessibility and better UX
    class NotificationManager {
      constructor() {
        this.notifications = [];
        this.maxNotifications = 3;
        this.createContainer();
      }

      createContainer() {
        this.container = document.createElement('div');
        this.container.id = 'notification-container';
        this.container.className = 'fixed top-4 right-4 z-50 space-y-2';
        this.container.setAttribute('aria-live', 'polite');
        this.container.setAttribute('aria-label', 'Notifications');
        document.body.appendChild(this.container);
      }

      show(message, type = 'info', duration = 5000) {
        try {
          // Sanitize message to prevent XSS
          const sanitizedMessage = this.sanitizeHTML(message);
          
          // Remove oldest notification if at max capacity
          if (this.notifications.length >= this.maxNotifications) {
            this.remove(this.notifications[0]);
          }

          const notification = this.createNotification(sanitizedMessage, type, duration);
          this.notifications.push(notification);
          this.container.appendChild(notification);

          // Animate in
          requestAnimationFrame(() => {
            notification.style.transform = 'translateX(0)';
            notification.style.opacity = '1';
          });

          // Auto remove
          if (duration > 0) {
            setTimeout(() => {
              this.remove(notification);
            }, duration);
          }

          return notification;
        } catch (error) {
          console.error('Error showing notification:', error);
        }
      }

      createNotification(message, type, duration) {
        const notification = document.createElement('div');
        const colors = {
          success: 'bg-green-500 border-green-600',
          error: 'bg-red-500 border-red-600',
          warning: 'bg-yellow-500 border-yellow-600',
          info: 'bg-blue-500 border-blue-600'
        };
        
        const icons = {
          success: 'fas fa-check-circle',
          error: 'fas fa-exclamation-circle',
          warning: 'fas fa-exclamation-triangle',
          info: 'fas fa-info-circle'
        };

        notification.className = `${colors[type] || colors.info} text-white px-4 py-3 rounded-lg shadow-lg border-l-4 transform translate-x-full opacity-0 transition-all duration-300 max-w-sm`;
        notification.setAttribute('role', 'alert');

        // Create content safely
        const contentDiv = document.createElement('div');
        contentDiv.className = 'flex items-start space-x-3';

        const iconDiv = document.createElement('div');
        iconDiv.className = 'flex-shrink-0 mt-0.5';
        iconDiv.innerHTML = `<i class="${icons[type] || icons.info}" aria-hidden="true"></i>`;

        const messageDiv = document.createElement('div');
        messageDiv.className = 'flex-1 min-w-0';
        
        const messageText = document.createElement('p');
        messageText.className = 'text-sm font-medium';
        messageText.textContent = message; // Safe text content

        const closeButton = document.createElement('button');
        closeButton.className = 'flex-shrink-0 ml-2 text-white hover:text-gray-200 focus:outline-none focus:ring-2 focus:ring-white rounded';
        closeButton.innerHTML = '<i class="fas fa-times text-xs" aria-hidden="true"></i>';
        closeButton.setAttribute('aria-label', 'Close notification');
        closeButton.onclick = () => this.remove(notification);

        messageDiv.appendChild(messageText);
        contentDiv.appendChild(iconDiv);
        contentDiv.appendChild(messageDiv);
        contentDiv.appendChild(closeButton);
        notification.appendChild(contentDiv);

        return notification;
      }

      remove(notification) {
        if (!notification || !notification.parentElement) return;

        const index = this.notifications.indexOf(notification);
        if (index > -1) {
          this.notifications.splice(index, 1);
        }

        notification.style.transform = 'translateX(100%)';
        notification.style.opacity = '0';

        setTimeout(() => {
          if (notification.parentElement) {
            notification.remove();
          }
        }, 300);
      }

      sanitizeHTML(str) {
        if (typeof str !== 'string') return '';
        const temp = document.createElement('div');
        temp.textContent = str;
        return temp.textContent; // Return safe text content
      }

      clear() {
        this.notifications.forEach(notification => this.remove(notification));
      }
    }

    // Initialize notification manager
    const notificationManager = new NotificationManager();

    // Legacy function for backward compatibility
    function showNotification(message, type = 'info', duration = 5000) {
      return notificationManager.show(message, type, duration);
    }

    // Loading Manager for better UX
    class LoadingManager {
      constructor() {
        this.activeLoaders = new Set();
        this.createGlobalLoader();
      }

      createGlobalLoader() {
        this.globalLoader = document.createElement('div');
        this.globalLoader.id = 'global-loader';
        this.globalLoader.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden';
        this.globalLoader.innerHTML = `
          <div class="bg-white rounded-lg p-6 shadow-xl flex items-center space-x-4">
            <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"></div>
            <span class="text-gray-700 font-medium">Loading...</span>
          </div>
        `;
        document.body.appendChild(this.globalLoader);
      }

      show(id = 'default', message = 'Loading...') {
        this.activeLoaders.add(id);
        
        if (this.globalLoader) {
          const messageSpan = this.globalLoader.querySelector('span');
          if (messageSpan) {
            messageSpan.textContent = message;
          }
          this.globalLoader.classList.remove('hidden');
        }
      }

      hide(id = 'default') {
        this.activeLoaders.delete(id);
        
        if (this.activeLoaders.size === 0 && this.globalLoader) {
          this.globalLoader.classList.add('hidden');
        }
      }

      showButtonLoader(button, originalText = null) {
        if (!button) return;
        
        const text = originalText || button.textContent;
        button.disabled = true;
        button.dataset.originalText = text;
        button.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Loading...';
        
        return () => {
          button.disabled = false;
          button.textContent = button.dataset.originalText || text;
          delete button.dataset.originalText;
        };
      }

      addProgressBar(container, progress = 0) {
        const progressBar = document.createElement('div');
        progressBar.className = 'w-full bg-gray-200 rounded-full h-2 mb-4';
        progressBar.innerHTML = `
          <div class="bg-purple-600 h-2 rounded-full transition-all duration-300" style="width: ${progress}%"></div>
        `;
        
        if (container) {
          container.appendChild(progressBar);
        }
        
        return {
          update: (newProgress) => {
            const bar = progressBar.querySelector('.bg-purple-600');
            if (bar) {
              bar.style.width = `${Math.min(100, Math.max(0, newProgress))}%`;
            }
          },
          remove: () => {
            if (progressBar.parentElement) {
              progressBar.remove();
            }
          }
        };
      }
    }

    // Initialize loading manager
    const loadingManager = new LoadingManager();

    // Enhanced Navbar scroll effects with dynamic content
    let lastScrollY = 0;
    const navbar = document.getElementById('navbar');
    const scrollIndicator = document.getElementById('scroll-indicator');
    const navbarSubtitle = document.getElementById('navbar-subtitle');
    const dynamicBadge = document.getElementById('dynamic-badge');
    const scrollText = document.getElementById('scroll-text');

    window.addEventListener('scroll', function() {
      const scrollY = window.pageYOffset;
      const documentHeight = document.documentElement.scrollHeight - window.innerHeight;
      const scrollProgress = (scrollY / documentHeight) * 100;
      
      // Update scroll progress indicator
      if (scrollIndicator) {
        scrollIndicator.style.width = scrollProgress + '%';
      }
      
      // Navbar scroll effects
      if (navbar) {
        if (scrollY > 100) {
          navbar.classList.add('navbar-scrolled');
          if (navbarSubtitle) {
            navbarSubtitle.style.opacity = '1';
            navbarSubtitle.style.transform = 'translateY(0)';
          }
        } else {
          navbar.classList.remove('navbar-scrolled');
          if (navbarSubtitle) {
            navbarSubtitle.style.opacity = '0';
            navbarSubtitle.style.transform = 'translateY(-10px)';
          }
        }
      }
      
      // Hide/show navbar on scroll direction
      if (scrollY > lastScrollY && scrollY > 200) {
        navbar.style.transform = 'translateY(-100%)';
      } else {
        navbar.style.transform = 'translateY(0)';
      }
      lastScrollY = scrollY;
      
      // Dynamic content reveals
      if (scrollY > 50) {
        dynamicBadge.style.opacity = '1';
        dynamicBadge.style.transform = 'translateY(0)';
      }
      
      if (scrollY > 150) {
        scrollText.style.opacity = '1';
        scrollText.style.transform = 'translateY(0)';
      }
    });

    // Mobile menu toggle
    const mobileMenuBtn = document.getElementById('mobile-menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');
    let mobileMenuOpen = false;

    mobileMenuBtn.addEventListener('click', function() {
      mobileMenuOpen = !mobileMenuOpen;
      if (mobileMenuOpen) {
        mobileMenu.classList.add('active');
        mobileMenuBtn.innerHTML = '<i class="fas fa-times text-xl"></i>';
      } else {
        mobileMenu.classList.remove('active');
        mobileMenuBtn.innerHTML = '<i class="fas fa-bars text-xl"></i>';
      }
    });

    // Close mobile menu when clicking on links
    document.querySelectorAll('#mobile-menu a').forEach(link => {
      link.addEventListener('click', function() {
        mobileMenu.classList.remove('active');
        mobileMenuBtn.innerHTML = '<i class="fas fa-bars text-xl"></i>';
        mobileMenuOpen = false;
      });
    });

    // Enhanced smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          const offsetTop = target.offsetTop - 80; // Account for fixed navbar
          window.scrollTo({
            top: offsetTop,
            behavior: 'smooth'
          });
        }
      });
    });



    // Custom notification function
    function showNotification(message) {
      const notification = document.createElement('div');
      notification.className = 'fixed top-24 right-6 bg-white shadow-2xl rounded-xl p-4 max-w-sm z-50 transform translate-x-full transition-transform duration-300';
      notification.innerHTML = `
        <div class="flex items-start space-x-3">
          <div class="w-8 h-8 bg-gradient-to-r from-purple-500 to-blue-500 rounded-lg flex items-center justify-center flex-shrink-0">
            <i class="fas fa-microphone text-white text-sm"></i>
          </div>
          <div>
            <p class="text-gray-800 text-sm font-medium">${message}</p>
            <button onclick="this.parentElement.parentElement.parentElement.remove()" class="text-gray-400 hover:text-gray-600 text-xs mt-1">Dismiss</button>
          </div>
        </div>
      `;
      
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.style.transform = 'translateX(0)';
      }, 100);
      
      setTimeout(() => {
        notification.style.transform = 'translateX(100%)';
        setTimeout(() => notification.remove(), 300);
      }, 4000);
    }

    // Parallax effect for hero section
    window.addEventListener('scroll', function() {
      const scrolled = window.pageYOffset;
      const parallax = document.querySelector('.hero-bg');
      const speed = scrolled * 0.3;
      parallax.style.transform = `translateY(${speed}px)`;
    });

    // Enhanced feature cards entrance animation
    const observerOptions = {
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver(function(entries) {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.style.opacity = '1';
          entry.target.style.transform = 'translateY(0)';
        }
      });
    }, observerOptions);

    // Apply animation to feature cards
    document.querySelectorAll('.feature-card').forEach((card, index) => {
      card.style.opacity = '0';
      card.style.transform = 'translateY(30px)';
      card.style.transition = `opacity 0.6s ease ${index * 0.1}s, transform 0.6s ease ${index * 0.1}s`;
      observer.observe(card);
    });

    // Add typing effect to hero text
    function typeWriter(element, text, speed = 50) {
      let i = 0;
      element.innerHTML = '';
      function type() {
        if (i < text.length) {
          element.innerHTML += text.charAt(i);
          i++;
          setTimeout(type, speed);
        }
      }
      type();
    }

    // Initialize typing effect after page load
    window.addEventListener('load', function() {
      setTimeout(() => {
        const heroDesc = document.getElementById('hero-description');
        const originalText = heroDesc.textContent;
        typeWriter(heroDesc, originalText, 30);
      }, 1000);
    });

    // Add scroll-triggered animations for stats
    const statsObserver = new IntersectionObserver(function(entries) {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const statNumbers = entry.target.querySelectorAll('.text-3xl');
          statNumbers.forEach(stat => {
            const finalNumber = stat.textContent;
            animateNumber(stat, finalNumber);
          });
        }
      });
    }, { threshold: 0.5 });

    // Animate numbers counting up
    function animateNumber(element, finalText) {
      const number = parseInt(finalText.replace(/\D/g, ''));
      const suffix = finalText.replace(/[\d,]/g, '');
      let current = 0;
      const increment = number / 50;
      const timer = setInterval(() => {
        current += increment;
        if (current >= number) {
          element.textContent = finalText;
          clearInterval(timer);
        } else {
          element.textContent = Math.floor(current) + suffix;
        }
      }, 30);
    }

    // Observe stats sections
    document.querySelectorAll('.grid.grid-cols-1.md\\:grid-cols-3, .grid.grid-cols-2').forEach(section => {
      statsObserver.observe(section);
    });

    // Enhanced counter animation for all counter elements
    const counterObserver = new IntersectionObserver(function(entries) {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const counter = entry.target;
          const target = parseInt(counter.getAttribute('data-target'));
          const suffix = counter.textContent.replace(/[\d]/g, '');
          animateCounter(counter, target, suffix);
        }
      });
    }, { threshold: 0.5 });

    // Animate counter with easing
    function animateCounter(element, target, suffix = '') {
      let current = 0;
      const increment = target / 60;
      const timer = setInterval(() => {
        current += increment;
        if (current >= target) {
          element.textContent = target + suffix;
          clearInterval(timer);
        } else {
          element.textContent = Math.floor(current) + suffix;
        }
      }, 25);
    }

    // Observe all counter elements
    document.querySelectorAll('.counter').forEach(counter => {
      counterObserver.observe(counter);
    });

    // Morphing blob animation trigger
    const blobObserver = new IntersectionObserver(function(entries) {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.style.animationPlayState = 'running';
        }
      });
    }, { threshold: 0.3 });

    document.querySelectorAll('.morphing-blob').forEach(blob => {
      blob.style.animationPlayState = 'paused';
      blobObserver.observe(blob);
    });

    // Interactive demo button
    document.addEventListener('click', function(e) {
      if (e.target.closest('.pulse-glow')) {
        e.preventDefault();
        
        // Create floating notification
        const notification = document.createElement('div');
        notification.className = 'fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-2xl shadow-2xl p-8 z-50 max-w-md w-full mx-4';
        notification.innerHTML = `
          <div class="text-center">
            <div class="w-16 h-16 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-4">
              <i class="fas fa-play text-white text-xl"></i>
            </div>
            <h4 class="text-xl font-bold text-gray-800 mb-2">Interactive Demo</h4>
            <p class="text-gray-600 mb-6">Experience our AI-powered voice assistant in action!</p>
            <div class="flex space-x-3">
              <button onclick="this.closest('.fixed').remove()" class="flex-1 bg-gray-200 text-gray-800 px-4 py-2 rounded-lg font-medium hover:bg-gray-300 transition-colors">
                Close
              </button>
              <button onclick="this.closest('.fixed').remove(); alert('🚀 Demo would launch here!')" class="flex-1 bg-gradient-to-r from-purple-600 to-blue-600 text-white px-4 py-2 rounded-lg font-medium hover:shadow-lg transition-all">
                Launch Demo
              </button>
            </div>
          </div>
        `;
        
        // Add backdrop
        const backdrop = document.createElement('div');
        backdrop.className = 'fixed inset-0 bg-black/50 z-40';
        backdrop.onclick = () => {
          backdrop.remove();
          notification.remove();
        };
        
        document.body.appendChild(backdrop);
        document.body.appendChild(notification);
        
        // Animate in
        setTimeout(() => {
          notification.style.transform = 'translate(-50%, -50%) scale(1)';
          notification.style.opacity = '1';
        }, 10);
      }
    });

    // Add staggered animation to success stories
    const storyObserver = new IntersectionObserver(function(entries) {
      entries.forEach((entry, index) => {
        if (entry.isIntersecting) {
          setTimeout(() => {
            entry.target.classList.add('bounce-in');
          }, index * 200);
        }
      });
    }, { threshold: 0.2 });

    document.querySelectorAll('.bg-white.rounded-2xl.p-6.shadow-lg').forEach(story => {
      storyObserver.observe(story);
    });

    // Add hover effects to feature cards
    document.querySelectorAll('.feature-card').forEach(card => {
      card.addEventListener('mouseenter', function() {
        this.style.transform = 'translateY(-12px) scale(1.03)';
        this.style.boxShadow = '0 25px 50px rgba(0, 0, 0, 0.15)';
      });
      
      card.addEventListener('mouseleave', function() {
        this.style.transform = 'translateY(0) scale(1)';
        this.style.boxShadow = '0 20px 40px rgba(0, 0, 0, 0.1)';
      });
    });

    // Add particle effect to hero section
    function createParticle() {
      const particle = document.createElement('div');
      particle.className = 'absolute w-2 h-2 bg-white/20 rounded-full';
      particle.style.left = Math.random() * 100 + '%';
      particle.style.top = '100%';
      particle.style.animation = `float ${3 + Math.random() * 4}s linear infinite`;
      
      const heroSection = document.querySelector('.hero-bg');
      heroSection.appendChild(particle);
      
      setTimeout(() => {
        particle.remove();
      }, 7000);
    }

    // Create particles periodically
    setInterval(createParticle, 2000);

    // Add text reveal animation
    const textObserver = new IntersectionObserver(function(entries) {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const text = entry.target;
          const words = text.textContent.split(' ');
          text.innerHTML = '';
          
          words.forEach((word, index) => {
            const span = document.createElement('span');
            span.textContent = word + ' ';
            span.style.opacity = '0';
            span.style.transform = 'translateY(20px)';
            span.style.display = 'inline-block';
            span.style.transition = `opacity 0.5s ease ${index * 0.1}s, transform 0.5s ease ${index * 0.1}s`;
            text.appendChild(span);
            
            setTimeout(() => {
              span.style.opacity = '1';
              span.style.transform = 'translateY(0)';
            }, 100);
          });
        }
      });
    }, { threshold: 0.5 });

    // Apply text reveal to specific headings
    document.querySelectorAll('h3, h4').forEach(heading => {
      if (!heading.querySelector('span')) {
        textObserver.observe(heading);
      }
    });

    // Add scroll-triggered background color changes
    window.addEventListener('scroll', function() {
      const scrollPercent = (window.pageYOffset / (document.documentElement.scrollHeight - window.innerHeight)) * 100;
      
      if (scrollPercent > 80) {
        document.body.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
      } else if (scrollPercent > 60) {
        document.body.style.background = 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)';
      } else if (scrollPercent > 40) {
        document.body.style.background = 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)';
      } else {
        document.body.style.background = 'linear-gradient(to bottom right, rgb(248 250 252), rgb(219 234 254))';
      }
    });

    // Add magnetic effect to buttons
    document.querySelectorAll('button, .feature-card').forEach(element => {
      element.addEventListener('mousemove', function(e) {
        const rect = this.getBoundingClientRect();
        const x = e.clientX - rect.left - rect.width / 2;
        const y = e.clientY - rect.top - rect.height / 2;
        
        this.style.transform = `translate(${x * 0.1}px, ${y * 0.1}px) scale(1.02)`;
      });
      
      element.addEventListener('mouseleave', function() {
        this.style.transform = 'translate(0, 0) scale(1)';
      });
    });

    // Add simple loading animation
    window.addEventListener('load', function() {
      setTimeout(() => {
        document.body.style.opacity = '1';
      }, 100);
    });

    // Authentication Management
    const userSection = document.getElementById('user-section');
    const authButtons = document.getElementById('auth-buttons');
    const userDisplayName = document.getElementById('user-display-name');
    const logoutBtn = document.getElementById('logout-btn');
    
    // Mobile elements
    const mobileUserSection = document.getElementById('mobile-user-section');
    const mobileAuthButtons = document.getElementById('mobile-auth-buttons');
    const mobileUserDisplayName = document.getElementById('mobile-user-display-name');
    const mobileLogoutBtn = document.getElementById('mobile-logout-btn');
    const navDashboard = document.getElementById('nav-dashboard');

    // Check if all required elements exist
    if (!userSection || !authButtons || !userDisplayName || !logoutBtn || 
        !mobileUserSection || !mobileAuthButtons || !mobileUserDisplayName || !mobileLogoutBtn || !navDashboard) {
      console.error('Some required elements are missing from the DOM');
    }

    // Check if user is logged in
    function checkAuthStatus() {
      const userEmail = localStorage.getItem('userEmail');
      console.log('Checking auth status. UserEmail:', userEmail);
      
      if (userEmail) {
        // User is logged in - Show user sections, hide auth buttons
        
        // Get user profile data
        const userData = localStorage.getItem('userData');
        let displayName = userEmail.split('@')[0]; // fallback to email username
        
        if (userData) {
          try {
            const user = JSON.parse(userData);
            displayName = user.firstName || userEmail.split('@')[0];
          } catch (e) {
            console.error('Error parsing user data:', e);
          }
        }
        
        if (userDisplayName) userDisplayName.textContent = displayName;
        if (mobileUserDisplayName) mobileUserDisplayName.textContent = displayName;
        
        // Desktop navigation
        console.log('User logged in - showing user section, hiding auth buttons');
        if (userSection) userSection.classList.remove('hidden');
        if (authButtons) authButtons.classList.add('hidden');
        if (navDashboard) navDashboard.classList.remove('hidden');
        
        // Mobile navigation
        if (mobileUserSection) mobileUserSection.classList.remove('hidden');
        if (mobileAuthButtons) mobileAuthButtons.classList.add('hidden');
        
        // Show welcome message (only once per session)
        if (!sessionStorage.getItem('welcomeShown')) {
          showWelcomeMessage(userEmail);
          sessionStorage.setItem('welcomeShown', 'true');
        }
      } else {
        // User is not logged in - Show auth buttons, hide user sections
        
        // Clear any remaining user data from display
        if (userDisplayName) userDisplayName.textContent = '';
        if (mobileUserDisplayName) mobileUserDisplayName.textContent = '';
        
        // Desktop navigation
        console.log('User not logged in - hiding user section, showing auth buttons');
        if (userSection) userSection.classList.add('hidden');
        if (authButtons) authButtons.classList.remove('hidden');
        if (navDashboard) navDashboard.classList.add('hidden');
        
        // Mobile navigation
        if (mobileUserSection) mobileUserSection.classList.add('hidden');
        if (mobileAuthButtons) mobileAuthButtons.classList.remove('hidden');
        
        // Clear welcome session flag
        sessionStorage.removeItem('welcomeShown');
      }
    }

    // Show welcome message
    function showWelcomeMessage(email) {
      const welcomeNotification = document.createElement('div');
      welcomeNotification.className = 'fixed top-24 right-6 bg-green-500 text-white shadow-2xl rounded-xl p-4 max-w-sm z-50 transform translate-x-full transition-transform duration-300';
      welcomeNotification.innerHTML = `
        <div class="flex items-start space-x-3">
          <div class="w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center flex-shrink-0">
            <i class="fas fa-check text-white text-sm"></i>
          </div>
          <div>
            <p class="text-white text-sm font-medium">Welcome back!</p>
            <p class="text-white/80 text-xs">${email}</p>
            <button onclick="this.parentElement.parentElement.parentElement.remove()" class="text-white/60 hover:text-white text-xs mt-1">Dismiss</button>
          </div>
        </div>
      `;
      
      document.body.appendChild(welcomeNotification);
      
      setTimeout(() => {
        welcomeNotification.style.transform = 'translateX(0)';
      }, 100);
      
      setTimeout(() => {
        welcomeNotification.style.transform = 'translateX(100%)';
        setTimeout(() => welcomeNotification.remove(), 300);
      }, 4000);
    }

    // Logout functionality for both desktop and mobile
    function handleLogout() {
      // Clear all user data
      localStorage.removeItem('userEmail');
      localStorage.removeItem('userData');
      sessionStorage.removeItem('welcomeShown');
      
      // Clear user display name immediately
      if (userDisplayName) userDisplayName.textContent = '';
      if (mobileUserDisplayName) mobileUserDisplayName.textContent = '';
      
      // Show logout message
      showNotification('You have been logged out successfully!');
      
      // Update UI immediately
      checkAuthStatus();
      
      // Scroll to top
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Desktop logout
    if (logoutBtn) {
      logoutBtn.addEventListener('click', handleLogout);
    }
    
    // Mobile logout
    if (mobileLogoutBtn) {
      mobileLogoutBtn.addEventListener('click', handleLogout);
    }

    // Initialize auth status on page load
    document.addEventListener('DOMContentLoaded', function() {
      console.log('DOM loaded, initializing auth status...');
      checkAuthStatus();
    });

    // Add a global function for testing (can be removed in production)
    window.testLogin = function(email = 'test@example.com', name = 'Test User') {
      localStorage.setItem('userEmail', email);
      localStorage.setItem('userData', JSON.stringify({firstName: name, email: email}));
      checkAuthStatus();
      console.log('Test login completed');
    };

    window.testLogout = function() {
      localStorage.removeItem('userEmail');
      localStorage.removeItem('userData');
      sessionStorage.removeItem('welcomeShown');
      checkAuthStatus();
      console.log('Test logout completed');
    };

    // Also check when page becomes visible (in case user logged in from another tab)
    document.addEventListener('visibilitychange', function() {
      if (!document.hidden) {
        checkAuthStatus();
      }
    });

    // Mentor Sessions Modal Functionality
    window.showMentorModal = function() {
      const userEmail = localStorage.getItem('userEmail');
      
      if (!userEmail) {
        // User not logged in - show login prompt
        showLoginPromptModal();
        return;
      }
      
      // User is logged in - show mentor booking modal
      showMentorBookingModal();
    };

    function showLoginPromptModal() {
      const modal = document.createElement('div');
      modal.className = 'fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4';
      modal.innerHTML = `
        <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full p-8 transform scale-95 opacity-0 transition-all duration-300">
          <div class="text-center">
            <div class="w-16 h-16 bg-gradient-to-r from-orange-400 to-red-500 rounded-full flex items-center justify-center mx-auto mb-4">
              <i class="fas fa-lock text-white text-xl"></i>
            </div>
            <h3 class="text-2xl font-bold text-gray-800 mb-2">Login Required</h3>
            <p class="text-gray-600 mb-6">Please sign in to book 1-on-1 mentor sessions and unlock premium features.</p>
            
            <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 mb-6">
              <div class="flex items-center justify-between text-sm">
                <span class="text-gray-600">Available Mentors:</span>
                <span class="font-semibold text-green-600">200+ Online</span>
              </div>
              <div class="flex items-center justify-between text-sm mt-2">
                <span class="text-gray-600">Response Time:</span>
                <span class="font-semibold text-blue-600">< 5 minutes</span>
              </div>
            </div>
            
            <div class="flex space-x-3">
              <button onclick="closeMentorModal()" class="flex-1 bg-gray-200 text-gray-800 px-4 py-3 rounded-xl font-medium hover:bg-gray-300 transition-colors">
                Maybe Later
              </button>
              <a href="login.html" class="flex-1 bg-gradient-to-r from-green-400 to-blue-500 text-white px-4 py-3 rounded-xl font-medium hover:shadow-lg transition-all text-center">
                Sign In Now
              </a>
            </div>
          </div>
        </div>
      `;
      
      document.body.appendChild(modal);
      
      // Animate in
      setTimeout(() => {
        const modalContent = modal.querySelector('div > div');
        modalContent.style.transform = 'scale(1)';
        modalContent.style.opacity = '1';
      }, 10);
      
      // Close on backdrop click
      modal.addEventListener('click', function(e) {
        if (e.target === modal) {
          closeMentorModal();
        }
      });
    }

    function showMentorBookingModal() {
      const userData = localStorage.getItem('userData');
      let userName = 'User';
      
      if (userData) {
        try {
          const user = JSON.parse(userData);
          userName = user.firstName || 'User';
        } catch (e) {
          console.error('Error parsing user data:', e);
        }
      }

      const modal = document.createElement('div');
      modal.className = 'fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4';
      modal.innerHTML = `
        <div class="bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto transform scale-95 opacity-0 transition-all duration-300">
          <div class="p-8">
            <div class="text-center mb-6">
              <div class="w-16 h-16 bg-gradient-to-r from-green-400 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-4 relative">
                <i class="fas fa-video text-white text-xl"></i>
                <div class="absolute -top-1 -right-1 w-4 h-4 bg-green-400 rounded-full animate-pulse"></div>
              </div>
              <h3 class="text-2xl font-bold text-gray-800 mb-2">Book Your Mentor Session</h3>
              <p class="text-gray-600">Hi ${userName}! Choose from our available mentors for personalized guidance.</p>
            </div>
            
            <!-- Available Mentors -->
            <div class="space-y-4 mb-6">
              <div class="flex items-center justify-between p-4 border border-gray-200 rounded-xl hover:border-green-400 transition-colors cursor-pointer mentor-option" data-mentor="sarah">
                <div class="flex items-center space-x-4">
                  <div class="w-12 h-12 bg-gradient-to-r from-pink-400 to-purple-500 rounded-full flex items-center justify-center">
                    <span class="text-white font-bold">SJ</span>
                  </div>
                  <div>
                    <h4 class="font-semibold text-gray-800">Sarah Johnson</h4>
                    <p class="text-sm text-gray-600">Career Counselor • 8+ years exp</p>
                    <div class="flex items-center mt-1">
                      <div class="w-2 h-2 bg-green-400 rounded-full mr-2"></div>
                      <span class="text-xs text-green-600">Available Now</span>
                    </div>
                  </div>
                </div>
                <div class="text-right">
                  <div class="text-sm font-semibold text-gray-800">Free</div>
                  <div class="text-xs text-gray-500">30 min session</div>
                </div>
              </div>
              
              <div class="flex items-center justify-between p-4 border border-gray-200 rounded-xl hover:border-green-400 transition-colors cursor-pointer mentor-option" data-mentor="mike">
                <div class="flex items-center space-x-4">
                  <div class="w-12 h-12 bg-gradient-to-r from-blue-400 to-cyan-500 rounded-full flex items-center justify-center">
                    <span class="text-white font-bold">MC</span>
                  </div>
                  <div>
                    <h4 class="font-semibold text-gray-800">Mike Chen</h4>
                    <p class="text-sm text-gray-600">Tech Skills Mentor • 10+ years exp</p>
                    <div class="flex items-center mt-1">
                      <div class="w-2 h-2 bg-green-400 rounded-full mr-2"></div>
                      <span class="text-xs text-green-600">Available Now</span>
                    </div>
                  </div>
                </div>
                <div class="text-right">
                  <div class="text-sm font-semibold text-gray-800">Free</div>
                  <div class="text-xs text-gray-500">45 min session</div>
                </div>
              </div>
              
              <div class="flex items-center justify-between p-4 border border-gray-200 rounded-xl hover:border-green-400 transition-colors cursor-pointer mentor-option" data-mentor="lisa">
                <div class="flex items-center space-x-4">
                  <div class="w-12 h-12 bg-gradient-to-r from-orange-400 to-red-500 rounded-full flex items-center justify-center">
                    <span class="text-white font-bold">LR</span>
                  </div>
                  <div>
                    <h4 class="font-semibold text-gray-800">Lisa Rodriguez</h4>
                    <p class="text-sm text-gray-600">Life Coach • 6+ years exp</p>
                    <div class="flex items-center mt-1">
                      <div class="w-2 h-2 bg-yellow-400 rounded-full mr-2"></div>
                      <span class="text-xs text-yellow-600">Available in 15 min</span>
                    </div>
                  </div>
                </div>
                <div class="text-right">
                  <div class="text-sm font-semibold text-gray-800">Free</div>
                  <div class="text-xs text-gray-500">30 min session</div>
                </div>
              </div>
            </div>
            
            <!-- Session Type -->
            <div class="mb-6">
              <label class="block text-sm font-medium text-gray-700 mb-2">Session Focus</label>
              <select class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                <option>Career Guidance & Planning</option>
                <option>Skill Development Strategy</option>
                <option>Resume & Interview Prep</option>
                <option>Learning Path Consultation</option>
                <option>Personal Development</option>
                <option>General Mentorship</option>
              </select>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex space-x-3">
              <button onclick="closeMentorModal()" class="flex-1 bg-gray-200 text-gray-800 px-4 py-3 rounded-xl font-medium hover:bg-gray-300 transition-colors">
                Cancel
              </button>
              <button onclick="bookMentorSession()" class="flex-1 bg-gradient-to-r from-green-400 to-blue-500 text-white px-4 py-3 rounded-xl font-medium hover:shadow-lg transition-all">
                Book Session
              </button>
            </div>
          </div>
        </div>
      `;
      
      document.body.appendChild(modal);
      
      // Animate in
      setTimeout(() => {
        const modalContent = modal.querySelector('div > div');
        modalContent.style.transform = 'scale(1)';
        modalContent.style.opacity = '1';
      }, 10);
      
      // Handle mentor selection
      modal.querySelectorAll('.mentor-option').forEach(option => {
        option.addEventListener('click', function() {
          modal.querySelectorAll('.mentor-option').forEach(opt => {
            opt.classList.remove('border-green-400', 'bg-green-50');
          });
          this.classList.add('border-green-400', 'bg-green-50');
        });
      });
      
      // Close on backdrop click
      modal.addEventListener('click', function(e) {
        if (e.target === modal) {
          closeMentorModal();
        }
      });
    }

    window.closeMentorModal = function() {
      const modal = document.querySelector('.fixed.inset-0.bg-black\\/50');
      if (modal) {
        const modalContent = modal.querySelector('div > div');
        modalContent.style.transform = 'scale(0.95)';
        modalContent.style.opacity = '0';
        setTimeout(() => modal.remove(), 300);
      }
    };

    window.bookMentorSession = function() {
      const selectedMentor = document.querySelector('.mentor-option.border-green-400');
      const mentorName = selectedMentor ? selectedMentor.querySelector('h4').textContent : 'a mentor';
      
      closeMentorModal();
      
      // Show success message
      setTimeout(() => {
        const successModal = document.createElement('div');
        successModal.className = 'fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4';
        successModal.innerHTML = `
          <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full p-8 text-center transform scale-95 opacity-0 transition-all duration-300">
            <div class="w-16 h-16 bg-gradient-to-r from-green-400 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-4">
              <i class="fas fa-check text-white text-xl"></i>
            </div>
            <h3 class="text-2xl font-bold text-gray-800 mb-2">Session Booked!</h3>
            <p class="text-gray-600 mb-4">Your session with ${mentorName} has been scheduled. You'll receive a video call link via email shortly.</p>
            <div class="bg-blue-50 rounded-xl p-4 mb-6">
              <p class="text-sm text-blue-800"><strong>Next Steps:</strong></p>
              <p class="text-sm text-blue-700 mt-1">• Check your email for the meeting link</p>
              <p class="text-sm text-blue-700">• Prepare your questions in advance</p>
              <p class="text-sm text-blue-700">• Join 5 minutes early</p>
            </div>
            <button onclick="this.closest('.fixed').remove()" class="w-full bg-gradient-to-r from-green-400 to-blue-500 text-white px-4 py-3 rounded-xl font-medium hover:shadow-lg transition-all">
              Got it!
            </button>
          </div>
        `;
        
        document.body.appendChild(successModal);
        
        setTimeout(() => {
          const modalContent = successModal.querySelector('div > div');
          modalContent.style.transform = 'scale(1)';
          modalContent.style.opacity = '1';
        }, 10);
        
        // Auto close after 5 seconds
        setTimeout(() => {
          successModal.remove();
        }, 5000);
      }, 300);
    };

    // Initialize the application
    function initializeApp() {
      // Update login state on page load
      updateLoginState();
      
      // Add logout button event listener
      const logoutBtn = document.getElementById('logout-btn');
      if (logoutBtn) {
        logoutBtn.addEventListener('click', logout);
      }
      
      // Add keyboard support for modals
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
          const loginModal = document.getElementById('loginModal');
          if (loginModal) {
            closeLoginModal();
          }
        }
      });
      
      // Handle redirect after login (if coming from login page)
      const urlParams = new URLSearchParams(window.location.search);
      if (urlParams.get('login') === 'success') {
        showNotification('🎉 Welcome back! You are now logged in.', 'success');
        // Clean up URL
        window.history.replaceState({}, document.title, window.location.pathname);
      }
      
      // Add smooth scrolling for anchor links
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute('href'));
          if (target) {
            target.scrollIntoView({
              behavior: 'smooth',
              block: 'start'
            });
          }
        });
      });
      
      // Add loading states for buttons
      document.querySelectorAll('button[onclick*="redirect"]').forEach(button => {
        button.addEventListener('click', function() {
          const originalText = this.innerHTML;
          this.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Loading...';
          this.disabled = true;
          
          setTimeout(() => {
            this.innerHTML = originalText;
            this.disabled = false;
          }, 2000);
        });
      });
      
      // Enhanced mobile menu functionality
      const mobileMenuBtn = document.getElementById('mobile-menu-btn');
      const mobileMenu = document.getElementById('mobile-menu');
      
      if (mobileMenuBtn && mobileMenu) {
        mobileMenuBtn.addEventListener('click', function() {
          mobileMenu.classList.toggle('active');
          const icon = this.querySelector('i');
          if (mobileMenu.classList.contains('active')) {
            icon.className = 'fas fa-times text-xl';
          } else {
            icon.className = 'fas fa-bars text-xl';
          }
        });
      }
      
      // Add intersection observer for animations
      const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
      };
      
      const observer = new IntersectionObserver(function(entries) {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('animate-fadeIn');
          }
        });
      }, observerOptions);
      
      // Observe all feature cards
      document.querySelectorAll('.feature-card').forEach(card => {
        observer.observe(card);
      });
      
      // Add performance monitoring
      if ('performance' in window) {
        window.addEventListener('load', function() {
          const loadTime = performance.timing.loadEventEnd - performance.timing.navigationStart;
          console.log(`Page loaded in ${loadTime}ms`);
        });
      }
      
      // Add error handling for images
      document.querySelectorAll('img').forEach(img => {
        img.addEventListener('error', function() {
          this.style.display = 'none';
          console.warn('Failed to load image:', this.src);
        });
      });
      
      // Enhanced accessibility features
      try {
        // Improved focus management
        document.addEventListener('focusin', function(e) {
          if (e.target.matches('button, a, input, select, textarea, [tabindex]')) {
            e.target.style.outline = '3px solid #667eea';
            e.target.style.outlineOffset = '2px';
            e.target.style.boxShadow = '0 0 0 1px rgba(102, 126, 234, 0.3)';
          }
        });
        
        document.addEventListener('focusout', function(e) {
          if (e.target.matches('button, a, input, select, textarea, [tabindex]')) {
            e.target.style.outline = '';
            e.target.style.outlineOffset = '';
            e.target.style.boxShadow = '';
          }
        });

        // Skip to main content link
        const skipLink = document.createElement('a');
        skipLink.href = '#main-content';
        skipLink.textContent = 'Skip to main content';
        skipLink.className = 'sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-blue-600 text-white px-4 py-2 rounded z-50';
        skipLink.style.position = 'absolute';
        skipLink.style.top = '-40px';
        skipLink.style.left = '6px';
        skipLink.style.transition = 'top 0.3s';
        skipLink.addEventListener('focus', function() {
          this.style.top = '6px';
        });
        skipLink.addEventListener('blur', function() {
          this.style.top = '-40px';
        });
        document.body.insertBefore(skipLink, document.body.firstChild);

        // Add main content landmark
        const heroSection = document.getElementById('home');
        if (heroSection) {
          heroSection.setAttribute('id', 'main-content');
          heroSection.setAttribute('role', 'main');
        }

        // Keyboard navigation for cards
        document.querySelectorAll('.feature-card').forEach((card, index) => {
          card.setAttribute('tabindex', '0');
          card.setAttribute('role', 'article');
          card.setAttribute('aria-label', `Feature ${index + 1}`);
          
          card.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' || e.key === ' ') {
              e.preventDefault();
              const button = this.querySelector('button');
              if (button) {
                button.click();
              }
            }
          });
        });

        // Announce dynamic content changes
        const announcer = document.createElement('div');
        announcer.setAttribute('aria-live', 'polite');
        announcer.setAttribute('aria-atomic', 'true');
        announcer.className = 'sr-only';
        announcer.id = 'announcer';
        document.body.appendChild(announcer);

        // Function to announce messages to screen readers
        window.announceToScreenReader = function(message) {
          const announcer = document.getElementById('announcer');
          if (announcer) {
            announcer.textContent = message;
            setTimeout(() => {
              announcer.textContent = '';
            }, 1000);
          }
        };

        // High contrast mode detection and support
        if (window.matchMedia) {
          const highContrastQuery = window.matchMedia('(prefers-contrast: high)');
          
          function handleHighContrast(e) {
            if (e.matches) {
              document.body.classList.add('high-contrast');
              console.log('High contrast mode detected');
            } else {
              document.body.classList.remove('high-contrast');
            }
          }
          
          highContrastQuery.addListener(handleHighContrast);
          handleHighContrast(highContrastQuery);
        }

        // Reduced motion support
        if (window.matchMedia) {
          const reducedMotionQuery = window.matchMedia('(prefers-reduced-motion: reduce)');
          
          function handleReducedMotion(e) {
            if (e.matches) {
              document.body.classList.add('reduced-motion');
              // Disable animations for users who prefer reduced motion
              const style = document.createElement('style');
              style.textContent = `
                .reduced-motion *,
                .reduced-motion *::before,
                .reduced-motion *::after {
                  animation-duration: 0.01ms !important;
                  animation-iteration-count: 1 !important;
                  transition-duration: 0.01ms !important;
                  scroll-behavior: auto !important;
                }
              `;
              document.head.appendChild(style);
              console.log('Reduced motion mode detected');
            }
          }
          
          reducedMotionQuery.addListener(handleReducedMotion);
          handleReducedMotion(reducedMotionQuery);
        }
      } catch (error) {
        console.error('Error setting up accessibility features:', error);
      }
    }

    // Initialize when DOM is ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initializeApp);
    } else {
      initializeApp();
    }

    // Performance monitoring and optimization
    class PerformanceMonitor {
      constructor() {
        this.metrics = {};
        this.init();
      }

      init() {
        if ('performance' in window) {
          this.measurePageLoad();
          this.measureResourceTiming();
          this.setupPerformanceObserver();
        }
      }

      measurePageLoad() {
        window.addEventListener('load', () => {
          const navigation = performance.getEntriesByType('navigation')[0];
          if (navigation) {
            this.metrics.pageLoad = {
              domContentLoaded: navigation.domContentLoadedEventEnd - navigation.domContentLoadedEventStart,
              loadComplete: navigation.loadEventEnd - navigation.loadEventStart,
              totalTime: navigation.loadEventEnd - navigation.fetchStart
            };
            
            console.log('Page Performance Metrics:', this.metrics.pageLoad);
            
            // Report slow loading
            if (this.metrics.pageLoad.totalTime > 3000) {
              console.warn('Slow page load detected:', this.metrics.pageLoad.totalTime + 'ms');
            }
          }
        });
      }

      measureResourceTiming() {
        window.addEventListener('load', () => {
          const resources = performance.getEntriesByType('resource');
          const slowResources = resources.filter(resource => resource.duration > 1000);
          
          if (slowResources.length > 0) {
            console.warn('Slow loading resources:', slowResources.map(r => ({
              name: r.name,
              duration: r.duration
            })));
          }
        });
      }

      setupPerformanceObserver() {
        if ('PerformanceObserver' in window) {
          // Observe Largest Contentful Paint
          try {
            const lcpObserver = new PerformanceObserver((list) => {
              const entries = list.getEntries();
              const lastEntry = entries[entries.length - 1];
              this.metrics.lcp = lastEntry.startTime;
              
              if (lastEntry.startTime > 2500) {
                console.warn('Poor LCP detected:', lastEntry.startTime + 'ms');
              }
            });
            lcpObserver.observe({ entryTypes: ['largest-contentful-paint'] });
          } catch (error) {
            console.log('LCP observer not supported');
          }

          // Observe First Input Delay
          try {
            const fidObserver = new PerformanceObserver((list) => {
              const entries = list.getEntries();
              entries.forEach(entry => {
                this.metrics.fid = entry.processingStart - entry.startTime;
                
                if (entry.processingStart - entry.startTime > 100) {
                  console.warn('Poor FID detected:', entry.processingStart - entry.startTime + 'ms');
                }
              });
            });
            fidObserver.observe({ entryTypes: ['first-input'] });
          } catch (error) {
            console.log('FID observer not supported');
          }
        }
      }

      getMetrics() {
        return this.metrics;
      }
    }

    // Initialize performance monitoring
    const performanceMonitor = new PerformanceMonitor();

    // Add service worker for offline functionality (optional)
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function() {
        navigator.serviceWorker.register('/sw.js').then(function(registration) {
          console.log('ServiceWorker registration successful');
        }).catch(function(err) {
          console.log('ServiceWorker registration failed - continuing without offline support');
        });
      });
    }
    // Simple AI Chatbot with API fallback
    class SimpleChatbot {
      constructor() {
        this.isListening = false;
        this.isSpeaking = false;
        this.recognition = null;
        this.synthesis = window.speechSynthesis;
        this.chatHistory = [];
        
        // Load configuration
        this.config = typeof CHATBOT_CONFIG !== 'undefined' ? CHATBOT_CONFIG : {
          openai: { apiKey: '' },
          huggingface: { apiKey: '' },
          backend: { url: 'http://localhost:5000/api/ai', enabled: true },
          behavior: { enableVoice: true, enableTypingIndicator: true, responseDelay: 1000, fallbackToLocal: true },
          systemPrompt: 'You are a helpful assistant for NextBloom.'
        };
        
        this.apiStatus = 'local'; // Default to local responses
        this.initializeSpeechRecognition();
        this.createAssistantUI();
        this.checkAPIs();
      }

      // Pre-programmed responses for fallback
      responses = {
        greetings: [
          "Hello! I'm here to help you with your learning journey. What would you like to know?",
          "Hi there! I'm your NextBloom assistant. How can I support you today?",
          "Welcome! I'm here to help with career guidance and learning support. What's on your mind?"
        ],
        
        career: {
          general: [
            "I can help you explore various career paths! Here are some popular options:\n\n🖥️ **Technology**: Web Development, Data Science, Cybersecurity\n💼 **Business**: Digital Marketing, Project Management\n🎨 **Creative**: UX/UI Design, Content Creation\n🏥 **Healthcare**: Medical Coding, Healthcare Administration\n\nWhich field interests you most?",
            "Great question about careers! Many successful people have changed careers or started without traditional degrees. What are your interests or skills you'd like to develop?"
          ],
          
          technology: [
            "Technology is a fantastic field! Here's a beginner-friendly path:\n\n**Web Development** (6-12 months)\n• Learn HTML, CSS, JavaScript\n• Build projects and portfolio\n• Salary: $50k-$120k\n\n**Data Science** (8-15 months)\n• Python, statistics, machine learning\n• Work with data and insights\n• Salary: $70k-$150k\n\nWould you like a detailed roadmap?"
          ],
          
          business: [
            "Business careers offer great flexibility!\n\n**Digital Marketing** (4-8 months)\n• Social media, SEO, content creation\n• Work remotely or freelance\n• Salary: $40k-$90k\n\n**Project Management** (6-12 months)\n• Organize teams and projects\n• Get certified (PMP, Scrum)\n• Salary: $55k-$110k\n\nWhich interests you more?"
          ]
        },
        
        emotional: {
          anxiety: [
            "It's completely normal to feel anxious about your future - you're not alone. Here's what can help:\n\n✨ Take it one step at a time\n✨ Focus on small, achievable goals\n✨ Remember that every expert was once a beginner\n✨ Your unique journey gives you valuable perspective\n\nWhat's one small step you could take today?",
            "I understand that anxiety can feel overwhelming. Remember, you don't have to figure everything out today. Let's break it down into manageable pieces. What's one area you'd like to focus on first?"
          ],
          
          motivation: [
            "I believe in your potential! 🌟 Dropping out doesn't define your future - your actions from now on do. You have:\n\n💪 Life experience that others don't\n💪 Resilience from overcoming challenges\n💪 The courage to seek help and improve\n💪 Unique perspectives that employers value\n\nWhat's one thing you're excited to learn?",
            "Your story isn't over - it's just taking a different path! Some of the most successful people took unconventional routes. What matters is that you're here, ready to grow. That's already huge!"
          ],
          
          confidence: [
            "You are more capable than you realize! 🌟 Confidence comes from taking action. Here's how to build it:\n\n🎯 Start with small wins\n🎯 Celebrate every bit of progress\n🎯 Learn one new thing each day\n🎯 Connect with supportive people\n\nWhat's one skill you'd like to develop that would boost your confidence?"
          ]
        },
        
        learning: {
          programming: [
            "Programming is an excellent choice! Here's a beginner path:\n\n**Week 1-2: HTML & CSS**\n• Build your first webpage\n• Free: freeCodeCamp, MDN\n\n**Week 3-6: JavaScript**\n• Add interactivity\n• Practice with projects\n\n**Week 7-10: Framework**\n• React or Vue.js\n• Build portfolio\n\n**Week 11-12: Job Search**\n• Create GitHub profile\n• Network with developers\n\nWant specific resources?"
          ],
          
          general: [
            "Here are excellent learning strategies:\n\n📚 **Free Resources**:\n• Coursera, edX, Khan Academy\n• YouTube tutorials\n• Library resources\n\n⏰ **Study Tips**:\n• 30 minutes daily beats 5 hours once a week\n• Practice immediately\n• Join communities\n• Find a study buddy\n\nWhat subject interests you most?"
          ]
        },
        
        jobs: [
          "Many great jobs don't require traditional degrees!\n\n💻 **Tech Jobs**:\n• Web Developer (self-taught)\n• Digital Marketing Specialist\n• Social Media Manager\n• Technical Support\n\n🏢 **Business Roles**:\n• Sales Representative\n• Customer Success Manager\n• Administrative Assistant\n• Project Coordinator\n\n🎨 **Creative Work**:\n• Graphic Designer\n• Content Writer\n• Video Editor\n• Photographer\n\nWhat type of work interests you?"
        ],
        
        default: [
          "I'm here to help with career guidance, learning support, and motivation. You can ask me about:\n\n• Career paths and job options\n• Learning resources and study plans\n• Dealing with anxiety or confidence issues\n• Specific skills like programming or marketing\n\nWhat would you like to explore?",
          "I'd love to help you! I can assist with career planning, learning strategies, emotional support, and practical advice. What's on your mind?",
          "That's interesting! I can help with career guidance, learning resources, or emotional support. What area would you like to focus on?"
        ]
      };

      async checkAPIs() {
        // Check if we have API keys configured
        const hasOpenAI = this.config.openai.apiKey && this.config.openai.apiKey.length > 0;
        const hasHuggingFace = this.config.huggingface.apiKey && this.config.huggingface.apiKey.length > 0;
        const hasBackend = this.config.backend.enabled;
        
        if (hasOpenAI || hasHuggingFace || hasBackend) {
          this.apiStatus = 'available';
          console.log('AI APIs available:', { openai: hasOpenAI, huggingface: hasHuggingFace, backend: hasBackend });
        } else {
          this.apiStatus = 'local';
          console.log('Using local responses only');
        }
      }

      initializeSpeechRecognition() {
        // Initialize Speech Recognition
        if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
          const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
          this.recognition = new SpeechRecognition();
          
          this.recognition.continuous = false;
          this.recognition.interimResults = true;
          this.recognition.lang = 'en-US';
          this.recognition.maxAlternatives = 1;

          this.recognition.onstart = () => {
            this.isListening = true;
            this.updateVoiceUI(true);
            this.showVoiceFeedback('🎤 Listening... Speak now!');
            console.log('Voice recognition started');
          };

          this.recognition.onresult = (event) => {
            let transcript = '';
            let isFinal = false;
            
            for (let i = event.resultIndex; i < event.results.length; i++) {
              transcript += event.results[i][0].transcript;
              if (event.results[i].isFinal) {
                isFinal = true;
              }
            }
            
            // Update input field with interim results
            const chatInput = document.getElementById('chat-input');
            if (chatInput) {
              chatInput.value = transcript;
            }
            
            // Show what's being recognized
            if (isFinal) {
              this.showVoiceFeedback(`✅ You said: "${transcript}"`);
              // Auto-send the message immediately
              setTimeout(() => {
                this.handleUserInput(transcript, 'voice');
                this.hideVoiceFeedback();
              }, 100);
            } else {
              this.showVoiceFeedback(`🎤 Recognizing: "${transcript}"`);
            }
          };

          this.recognition.onerror = (event) => {
            console.error('Speech recognition error:', event.error);
            this.isListening = false;
            this.updateVoiceUI(false);
            
            let errorMessage = 'Speech recognition error. ';
            switch(event.error) {
              case 'no-speech':
                errorMessage += 'No speech detected. Please try again.';
                break;
              case 'audio-capture':
                errorMessage += 'Microphone not accessible. Check permissions.';
                break;
              case 'not-allowed':
                errorMessage += 'Microphone permission denied. Please allow access.';
                break;
              case 'network':
                errorMessage += 'Network error. Check your connection.';
                break;
              default:
                errorMessage += 'Please try again.';
            }
            
            this.showVoiceFeedback(errorMessage);
            this.showNotification(errorMessage, 'error');
            setTimeout(() => this.hideVoiceFeedback(), 4000);
          };

          this.recognition.onend = () => {
            this.isListening = false;
            this.updateVoiceUI(false);
            console.log('Voice recognition ended');
          };
        } else {
          console.warn('Speech recognition not supported in this browser');
        }
        
        // Initialize Speech Synthesis
        if ('speechSynthesis' in window) {
          this.synthesis = window.speechSynthesis;
          this.voices = [];
          
          // Load voices
          this.loadVoices();
          
          // Reload voices when they change (some browsers load them asynchronously)
          if (speechSynthesis.onvoiceschanged !== undefined) {
            speechSynthesis.onvoiceschanged = () => {
              this.loadVoices();
            };
          }
        } else {
          console.warn('Speech synthesis not supported in this browser');
        }
      }
      
      loadVoices() {
        this.voices = this.synthesis.getVoices();
        console.log('Available voices:', this.voices.length);
      }

      createAssistantUI() {
        // Floating AI assistant button removed as requested

        // Create floating voice button for mobile (when chat is open)
        const floatingVoiceButton = document.createElement('div');
        floatingVoiceButton.id = 'floating-voice-button';
        floatingVoiceButton.className = 'fixed bottom-20 right-4 z-50 hidden';
        floatingVoiceButton.innerHTML = `
          <button id="floating-voice-btn" class="bg-gradient-to-r from-red-500 to-pink-500 text-white w-12 h-12 rounded-full shadow-xl hover:shadow-2xl transition-all duration-300 flex items-center justify-center">
            <i class="fas fa-microphone text-base"></i>
          </button>
        `;
        document.body.appendChild(floatingVoiceButton);

        // Create AI assistant modal
        const assistantModal = document.createElement('div');
        assistantModal.id = 'ai-assistant-modal';
        assistantModal.className = 'fixed inset-0 bg-black/50 z-50 hidden flex items-center justify-center p-2 sm:p-4';
        assistantModal.innerHTML = `
          <div class="bg-white rounded-2xl shadow-2xl w-full max-w-6xl max-h-[95vh] overflow-hidden transform scale-95 opacity-0 transition-all duration-300">
            <!-- Header -->
            <div class="bg-gradient-to-r from-purple-500 to-blue-500 text-white p-4 sm:p-6">
              <div class="flex items-center justify-between">
                <div class="flex items-center space-x-2 sm:space-x-3">
                  <div class="w-8 h-8 sm:w-10 sm:h-10 bg-white/20 rounded-full flex items-center justify-center">
                    <i class="fas fa-robot text-sm sm:text-lg"></i>
                  </div>
                  <div class="flex-1 min-w-0">
                    <h3 class="text-lg sm:text-xl font-bold truncate">NextBloom AI Assistant</h3>
                    <div class="flex flex-col sm:flex-row sm:items-center sm:space-x-4 text-xs sm:text-sm">
                      <p class="text-white/80 hidden sm:block">Your personal learning companion</p>
                      <div class="flex items-center space-x-2 mt-1 sm:mt-0">
                        <span id="api-status-indicator" class="bg-white/20 px-2 py-1 rounded-full text-xs">
                          Checking APIs...
                        </span>
                        <span id="voice-support-indicator" class="bg-green-500/20 px-2 py-1 rounded-full text-xs hidden">
                          🎤 Voice Ready
                        </span>
                      </div>
                    </div>
                  </div>
                </div>
                <button id="close-assistant" class="text-white/80 hover:text-white transition-colors p-1 sm:p-2">
                  <i class="fas fa-times text-lg sm:text-xl"></i>
                </button>
              </div>
            </div>

            <!-- Desktop Voice Control Bar -->
            <div class="hidden lg:block bg-gradient-to-r from-purple-50 to-blue-50 border-b border-purple-200 p-4">
              <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                  <div class="flex items-center space-x-2">
                    <i class="fas fa-microphone text-purple-600"></i>
                    <span class="font-semibold text-gray-800">Voice Assistant</span>
                    <span id="desktop-voice-badge" class="text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full hidden">
                      ✓ Ready
                    </span>
                  </div>
                  <div class="flex items-center space-x-3">
                    <button id="desktop-voice-toggle" class="bg-gradient-to-r from-purple-500 to-blue-500 text-white px-4 py-2 rounded-lg hover:shadow-lg transition-all text-sm font-medium flex items-center space-x-2">
                      <i class="fas fa-microphone"></i>
                      <span id="desktop-voice-status">Start Voice Input</span>
                    </button>
                    <button id="desktop-speak-toggle" class="bg-gradient-to-r from-green-500 to-teal-500 text-white px-4 py-2 rounded-lg hover:shadow-lg transition-all text-sm font-medium flex items-center space-x-2">
                      <i class="fas fa-volume-up"></i>
                      <span id="desktop-speak-status">Voice Output: ON</span>
                    </button>
                    <button id="desktop-voice-settings" class="bg-gray-200 hover:bg-gray-300 text-gray-700 px-3 py-2 rounded-lg transition-all text-sm">
                      <i class="fas fa-cog"></i>
                    </button>
                  </div>
                </div>
                <div class="text-xs text-gray-600">
                  Press <kbd class="bg-white px-2 py-1 rounded border">Ctrl+M</kbd> for quick voice access
                </div>
              </div>
            </div>

            <!-- Mobile Voice Control Bar -->
            <div class="bg-gradient-to-r from-purple-100 to-blue-100 border-b border-purple-200 p-3 sm:p-4 lg:hidden">
              <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                  <button id="mobile-voice-toggle" class="bg-gradient-to-r from-purple-500 to-blue-500 text-white px-4 py-2 rounded-full hover:shadow-lg transition-all text-sm font-medium flex items-center space-x-2">
                    <i class="fas fa-microphone"></i>
                    <span id="mobile-voice-status">🎤 Voice Input</span>
                  </button>
                  <button id="mobile-speak-toggle" class="bg-gradient-to-r from-green-500 to-teal-500 text-white px-3 py-2 rounded-full hover:shadow-lg transition-all text-sm font-medium">
                    <i class="fas fa-volume-up"></i>
                    <span id="mobile-speak-status" class="hidden sm:inline ml-1">Voice Output</span>
                  </button>
                </div>
                <div class="flex items-center space-x-2">
                  <span id="mobile-voice-badge" class="text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full hidden">
                    ✓ Ready
                  </span>
                  <button id="mobile-voice-help" class="text-purple-600 hover:text-purple-700 p-1">
                    <i class="fas fa-question-circle"></i>
                  </button>
                </div>
              </div>
            </div>

            <!-- Chat Container -->
            <div class="flex flex-col lg:flex-row h-[75vh] sm:h-[80vh]">
              <!-- Chat Messages -->
              <div class="flex-1 flex flex-col min-h-0">
                <div id="chat-messages" class="flex-1 p-3 sm:p-6 overflow-y-auto space-y-3 sm:space-y-4 bg-gray-50">
                  <!-- Welcome message will be added here -->
                </div>

                <!-- Input Area -->
                <div class="p-3 sm:p-6 bg-white border-t border-gray-200">
                  <div class="flex items-center space-x-2 sm:space-x-3">
                    <div class="flex-1 relative">
                      <input type="text" id="chat-input" placeholder="Type your message or click 🎤 to speak..." 
                             class="w-full p-3 sm:p-4 pr-16 sm:pr-20 border border-gray-300 rounded-full focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm sm:text-base">
                      <button id="voice-input-btn" class="absolute right-2 sm:right-3 top-1/2 transform -translate-y-1/2 bg-purple-100 hover:bg-purple-200 text-purple-600 hover:text-purple-700 transition-all p-2 rounded-full">
                        <i class="fas fa-microphone text-sm sm:text-base"></i>
                      </button>
                    </div>
                    <button id="send-message" class="bg-gradient-to-r from-purple-500 to-blue-500 text-white w-10 h-10 sm:w-12 sm:h-12 rounded-full flex items-center justify-center hover:shadow-lg transition-all">
                      <i class="fas fa-paper-plane text-sm sm:text-base"></i>
                    </button>
                  </div>
                  
                  <!-- Voice Feedback -->
                  <div id="voice-feedback" class="mt-3 hidden">
                    <div class="bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 rounded-lg p-3">
                      <div class="flex items-center justify-center space-x-3">
                        <div class="flex items-center space-x-2">
                          <div id="voice-indicator" class="w-3 h-3 bg-red-500 rounded-full animate-pulse"></div>
                          <i class="fas fa-microphone-alt text-purple-600"></i>
                        </div>
                        <span id="voice-feedback-text" class="text-sm font-medium text-gray-700">Listening...</span>
                        <button id="stop-listening" class="bg-red-100 hover:bg-red-200 text-red-600 hover:text-red-700 px-2 py-1 rounded-full text-xs transition-all">
                          <i class="fas fa-stop mr-1"></i>Stop
                        </button>
                      </div>
                      <div id="voice-waveform" class="mt-2 flex items-center justify-center space-x-1">
                        <div class="w-1 bg-purple-400 rounded-full animate-pulse" style="height: 8px; animation-delay: 0s;"></div>
                        <div class="w-1 bg-purple-400 rounded-full animate-pulse" style="height: 12px; animation-delay: 0.1s;"></div>
                        <div class="w-1 bg-purple-400 rounded-full animate-pulse" style="height: 6px; animation-delay: 0.2s;"></div>
                        <div class="w-1 bg-purple-400 rounded-full animate-pulse" style="height: 10px; animation-delay: 0.3s;"></div>
                        <div class="w-1 bg-purple-400 rounded-full animate-pulse" style="height: 8px; animation-delay: 0.4s;"></div>
                      </div>
                    </div>
                  </div>
                  
                  <!-- Quick Actions -->
                  <div class="mt-3 sm:mt-4 flex flex-wrap gap-1 sm:gap-2">
                    <button class="quick-action bg-purple-100 text-purple-700 px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm hover:bg-purple-200 transition-colors" data-message="I need career guidance">
                      <i class="fas fa-briefcase mr-1"></i>
                      <span class="hidden sm:inline">Career Guidance</span>
                      <span class="sm:hidden">Career</span>
                    </button>
                    <button class="quick-action bg-blue-100 text-blue-700 px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm hover:bg-blue-200 transition-colors" data-message="I'm feeling anxious about my future">
                      <i class="fas fa-heart mr-1"></i>
                      <span class="hidden sm:inline">Emotional Support</span>
                      <span class="sm:hidden">Support</span>
                    </button>
                    <button class="quick-action bg-green-100 text-green-700 px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm hover:bg-green-200 transition-colors" data-message="Help me learn programming">
                      <i class="fas fa-code mr-1"></i>
                      <span class="hidden sm:inline">Learning Resources</span>
                      <span class="sm:hidden">Learning</span>
                    </button>
                    <button class="quick-action bg-orange-100 text-orange-700 px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm hover:bg-orange-200 transition-colors" data-message="Create a roadmap for web development">
                      <i class="fas fa-map mr-1"></i>
                      <span class="hidden sm:inline">Create Roadmap</span>
                      <span class="sm:hidden">Roadmap</span>
                    </button>
                  </div>
                </div>
              </div>

              <!-- Sidebar -->
              <div class="w-full lg:w-80 bg-gray-50 border-t lg:border-t-0 lg:border-l border-gray-200 p-3 sm:p-6 max-h-48 lg:max-h-none overflow-y-auto">
                <div class="flex flex-col space-y-4">
                  <!-- Voice Settings -->
                  <div class="bg-white p-3 sm:p-4 rounded-lg shadow-sm border-2 border-purple-100">
                    <h5 class="font-semibold text-gray-800 mb-3 text-sm sm:text-base flex items-center">
                      <i class="fas fa-volume-up text-purple-500 mr-2"></i>
                      Voice Settings
                    </h5>
                    <div class="space-y-3">
                      <!-- Voice Output Toggle -->
                      <button id="speak-toggle" class="w-full bg-gradient-to-r from-green-500 to-teal-500 text-white py-2 px-3 rounded-lg hover:shadow-lg transition-all text-sm font-medium">
                        <div class="flex items-center justify-center">
                          <i class="fas fa-volume-up mr-2"></i>
                          <span id="speak-status">🔊 Voice Output: ON</span>
                        </div>
                      </button>
                      
                      <!-- Voice Settings -->
                      <div class="bg-gray-50 p-2 rounded-lg">
                        <div class="flex items-center justify-between text-xs">
                          <span class="text-gray-600">Voice Speed:</span>
                          <select id="voice-speed" class="text-xs border rounded px-1 py-0.5">
                            <option value="0.7">Slow</option>
                            <option value="0.9" selected>Normal</option>
                            <option value="1.2">Fast</option>
                          </select>
                        </div>
                      </div>
                    </div>
                    <div class="mt-3 text-xs text-gray-500 space-y-1">
                      <p>• Use 🎤 button in input field to speak</p>
                      <p>• Press <kbd class="bg-gray-200 px-1 rounded">Ctrl+M</kbd> for quick voice access</p>
                      <p>• Toggle voice output on/off as needed</p>
                    </div>
                  </div>

                  <!-- Quick Help -->
                  <div class="bg-white p-3 sm:p-4 rounded-lg shadow-sm">
                    <h5 class="font-semibold text-gray-800 mb-3 text-sm sm:text-base flex items-center">
                      <i class="fas fa-lightbulb text-yellow-500 mr-2"></i>
                      Quick Help
                    </h5>
                    <div class="space-y-2">
                      <div class="text-xs sm:text-sm">
                        <p class="font-medium text-gray-700">💼 Career Paths</p>
                        <p class="text-gray-600">Technology, Business, Creative, Healthcare</p>
                      </div>
                      <div class="text-xs sm:text-sm">
                        <p class="font-medium text-gray-700">📚 Learning Support</p>
                        <p class="text-gray-600">Study plans and resources</p>
                      </div>
                      <div class="text-xs sm:text-sm">
                        <p class="font-medium text-gray-700">💪 Emotional Guidance</p>
                        <p class="text-gray-600">Motivation and confidence building</p>
                      </div>
                    </div>
                  </div>

                  <!-- Voice Commands -->
                  <div class="bg-white p-3 sm:p-4 rounded-lg shadow-sm">
                    <h5 class="font-semibold text-gray-800 mb-3 text-sm sm:text-base flex items-center">
                      <i class="fas fa-comments text-blue-500 mr-2"></i>
                      Voice Examples
                    </h5>
                    <div class="space-y-2">
                      <div class="text-xs text-gray-600 space-y-1">
                        <p class="font-medium text-gray-700">💼 Career Help:</p>
                        <p>"Help me find a career"</p>
                        <p>"What jobs don't need degrees?"</p>
                      </div>
                      <div class="text-xs text-gray-600 space-y-1">
                        <p class="font-medium text-gray-700">💪 Support:</p>
                        <p>"I need motivation"</p>
                        <p>"I'm feeling anxious"</p>
                      </div>
                      <div class="text-xs text-gray-600 space-y-1">
                        <p class="font-medium text-gray-700">📚 Learning:</p>
                        <p>"Create a learning plan"</p>
                        <p>"Help me learn programming"</p>
                      </div>
                    </div>
                    
                    <!-- Voice Tips -->
                    <div class="mt-3 p-2 bg-blue-50 rounded-lg">
                      <p class="text-xs text-blue-700 font-medium mb-1">💡 Voice Tips:</p>
                      <ul class="text-xs text-blue-600 space-y-0.5">
                        <li>• Speak clearly and at normal pace</li>
                        <li>• Allow microphone access when prompted</li>
                        <li>• Use Chrome or Firefox for best results</li>
                        <li>• Ensure quiet environment</li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        `;
        document.body.appendChild(assistantModal);

        // Initialize voice support indicator
        this.updateVoiceSupportIndicator();
        
        this.bindEvents();
        this.addWelcomeMessage();
        this.setupMobileOptimizations();
      }

      bindEvents() {
        // AI assistant button removed - using navbar voice button instead

        // Close assistant modal
        document.getElementById('close-assistant').addEventListener('click', () => {
          this.closeAssistant();
        });

        // Send message
        document.getElementById('send-message').addEventListener('click', () => {
          this.sendMessage();
        });

        // Enter key to send message
        document.getElementById('chat-input').addEventListener('keypress', (e) => {
          if (e.key === 'Enter') {
            this.sendMessage();
          }
        });

        // Voice input button in chat input
        document.getElementById('voice-input-btn').addEventListener('click', () => {
          this.toggleVoiceInput();
        });

        // Floating voice button
        document.getElementById('floating-voice-btn').addEventListener('click', () => {
          this.toggleVoiceInput();
        });

        // Desktop voice controls
        document.getElementById('desktop-voice-toggle').addEventListener('click', () => {
          this.toggleVoiceInput();
        });

        document.getElementById('desktop-speak-toggle').addEventListener('click', () => {
          this.toggleSpeechOutput();
        });

        document.getElementById('desktop-voice-settings').addEventListener('click', () => {
          this.showVoiceSettings();
        });

        // Mobile voice controls
        document.getElementById('mobile-voice-toggle').addEventListener('click', () => {
          this.toggleVoiceInput();
        });

        document.getElementById('mobile-speak-toggle').addEventListener('click', () => {
          this.toggleSpeechOutput();
        });

        document.getElementById('mobile-voice-help').addEventListener('click', () => {
          this.showVoiceHelp();
        });

        // Main voice toggle button
        document.getElementById('voice-toggle').addEventListener('click', () => {
          this.toggleVoiceInput();
        });

        // Speak toggle button
        document.getElementById('speak-toggle').addEventListener('click', () => {
          this.toggleSpeechOutput();
        });

        // Stop listening button
        document.getElementById('stop-listening').addEventListener('click', () => {
          this.stopListening();
        });

        // Voice speed control
        document.getElementById('voice-speed').addEventListener('change', (e) => {
          const speed = parseFloat(e.target.value);
          this.config.behavior.voiceSpeed = speed;
          this.showNotification(`Voice speed set to ${speed === 0.7 ? 'Slow' : speed === 0.9 ? 'Normal' : 'Fast'}`, 'success');
        });

      

        // Quick action buttons
        document.querySelectorAll('.quick-action').forEach(button => {
          button.addEventListener('click', (e) => {
            const message = e.currentTarget.dataset.message;
            if (message) {
              document.getElementById('chat-input').value = message;
              this.sendMessage();
            }
          });
        });

        // Close modal when clicking outside
        document.getElementById('ai-assistant-modal').addEventListener('click', (e) => {
          if (e.target.id === 'ai-assistant-modal') {
            this.closeAssistant();
          }
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
          // Ctrl/Cmd + K to open assistant
          if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
            e.preventDefault();
            this.openAssistant();
          }
          
          // Escape to close assistant
          if (e.key === 'Escape' && !document.getElementById('ai-assistant-modal').classList.contains('hidden')) {
            this.closeAssistant();
          }
          
          // Ctrl/Cmd + M to toggle voice input (when modal is open)
          if ((e.ctrlKey || e.metaKey) && e.key === 'm' && !document.getElementById('ai-assistant-modal').classList.contains('hidden')) {
            e.preventDefault();
            this.toggleVoiceInput();
          }
        });
        document.getElementById('voice-input-btn').addEventListener('click', () => {
          this.toggleVoiceInput();
        });

        // Quick actions
        document.querySelectorAll('.quick-action').forEach(button => {
          button.addEventListener('click', (e) => {
            const action = e.target.dataset.action;
            this.handleQuickAction(action);
          });
        });

        // Update the main voice button to open assistant
        const mainVoiceButton = document.querySelector('.voice-button');
        if (mainVoiceButton) {
          mainVoiceButton.addEventListener('click', () => {
            this.openAssistant();
          });
        }

        // Close modal on backdrop click
        document.getElementById('ai-assistant-modal').addEventListener('click', (e) => {
          if (e.target.id === 'ai-assistant-modal') {
            this.closeAssistant();
          }
        });
      }

      addWelcomeMessage() {
        const welcomeMessage = "Hi! I'm your AI learning companion. I can help you with career guidance, emotional support, learning suggestions, and creating personalized roadmaps. You can type your message or use voice input. How can I assist you today?";
        this.addMessageToChat(welcomeMessage, 'ai');
        
        // Show voice-specific tips after welcome message
        setTimeout(() => {
          const hasVoice = this.recognition && this.synthesis;
          let tipsMessage = "💡 **Quick Tips:**\n";
          
          if (hasVoice) {
            tipsMessage += "🎤 **Voice Features Available:**\n";
            tipsMessage += "• Click the purple microphone button to speak\n";
            tipsMessage += "• Use 'Start Voice Input' in the sidebar\n";
            tipsMessage += "• Press **Ctrl+M** for quick voice access\n";
            tipsMessage += "• Toggle voice output on/off as needed\n\n";
          }
          
          tipsMessage += "⌨️ **Keyboard Shortcuts:**\n";
          tipsMessage += "• Press **Ctrl+K** to open this chat anytime\n";
          tipsMessage += "• Press **Escape** to close the chat\n";
          tipsMessage += "• Use quick action buttons for common requests\n\n";
          
          if (hasVoice) {
            tipsMessage += "🗣️ **Try saying:** \"Help me find a career\" or \"I need motivation\"";
          } else {
            tipsMessage += "💬 **Try typing:** \"Help me find a career\" or \"I need motivation\"";
          }
          
          this.addMessageToChat(tipsMessage, 'ai');
        }, 2000);
      }

      updateVoiceSupportIndicator() {
        const indicators = [
          'voice-support-indicator',
          'voice-support-badge',
          'desktop-voice-badge',
          'mobile-voice-badge'
        ];
        
        const apiIndicator = document.getElementById('api-status-indicator');
        
        indicators.forEach(id => {
          const element = document.getElementById(id);
          if (!element) return;
          
          if (this.recognition && this.synthesis) {
            element.classList.remove('hidden');
            if (id.includes('indicator')) {
              element.textContent = '🎤 Voice Ready';
            } else {
              element.textContent = '✓ Ready';
              element.className = element.className.replace(/bg-\w+-100 text-\w+-700/, 'bg-green-100 text-green-700');
            }
          } else if (this.recognition || this.synthesis) {
            element.classList.remove('hidden');
            if (id.includes('indicator')) {
              element.textContent = '🎤 Partial Support';
            } else {
              element.textContent = '⚠ Limited';
              element.className = element.className.replace(/bg-\w+-100 text-\w+-700/, 'bg-yellow-100 text-yellow-700');
            }
          } else {
            if (id.includes('indicator')) {
              element.classList.add('hidden');
            } else {
              element.classList.remove('hidden');
              element.textContent = '✗ Not Available';
              element.className = element.className.replace(/bg-\w+-100 text-\w+-700/, 'bg-red-100 text-red-700');
            }
          }
        });

        // Update API status
        if (this.config.openai.apiKey && this.config.openai.apiKey.length > 10) {
          apiIndicator.textContent = '🤖 OpenAI Ready';
          apiIndicator.className = 'bg-green-500/20 px-2 py-1 rounded-full text-xs';
        } else if (this.config.huggingface.apiKey && this.config.huggingface.apiKey.length > 10) {
          apiIndicator.textContent = '🤗 HuggingFace Ready';
          apiIndicator.className = 'bg-green-500/20 px-2 py-1 rounded-full text-xs';
        } else if (this.config.backend.enabled) {
          apiIndicator.textContent = '🔧 Local Backend';
          apiIndicator.className = 'bg-blue-500/20 px-2 py-1 rounded-full text-xs';
        } else {
          apiIndicator.textContent = '💬 Local Responses';
          apiIndicator.className = 'bg-yellow-500/20 px-2 py-1 rounded-full text-xs';
        }
      }

      toggleVoiceInput() {
        if (!this.recognition) {
          this.showVoiceNotSupported();
          return;
        }

        if (this.isListening) {
          this.stopListening();
        } else {
          this.startListening();
        }
      }

      startListening() {
        if (!this.recognition) return;

        try {
          this.isListening = true;
          this.recognition.start();
          this.updateVoiceUI(true);
          this.showVoiceFeedback('Listening... Speak now!');
        } catch (error) {
          console.error('Voice recognition error:', error);
          this.isListening = false;
          this.updateVoiceUI(false);
          this.showVoiceFeedback('Voice recognition failed. Please try again.');
        }
      }

      stopListening() {
        if (this.recognition && this.isListening) {
          this.recognition.stop();
          this.isListening = false;
          this.updateVoiceUI(false);
          this.hideVoiceFeedback();
        }
      }

      updateVoiceUI(isListening) {
        // Update all voice buttons
        const buttons = [
          { btn: 'voice-input-btn', status: null },
          { btn: 'voice-toggle', status: 'voice-status' },
          { btn: 'desktop-voice-toggle', status: 'desktop-voice-status' },
          { btn: 'mobile-voice-toggle', status: 'mobile-voice-status' },
          { btn: 'floating-voice-btn', status: null }
        ];

        buttons.forEach(({ btn, status }) => {
          const button = document.getElementById(btn);
          const statusElement = status ? document.getElementById(status) : null;
          
          if (!button) return;

          if (isListening) {
            // Update button appearance for listening state
            if (btn === 'voice-input-btn') {
              button.innerHTML = '<i class="fas fa-stop text-red-500 animate-pulse"></i>';
              button.className = 'absolute right-2 sm:right-3 top-1/2 transform -translate-y-1/2 bg-red-100 hover:bg-red-200 text-red-600 hover:text-red-700 transition-all p-2 rounded-full animate-pulse';
            } else if (btn === 'floating-voice-btn') {
              button.innerHTML = '<i class="fas fa-stop text-base animate-pulse"></i>';
              button.className = 'bg-gradient-to-r from-red-500 to-pink-500 text-white w-12 h-12 rounded-full shadow-xl hover:shadow-2xl transition-all duration-300 flex items-center justify-center animate-pulse';
            } else {
              button.classList.remove('from-purple-500', 'to-blue-500');
              button.classList.add('from-red-500', 'to-pink-500', 'animate-pulse');
              const icon = button.querySelector('i');
              if (icon) {
                icon.className = 'fas fa-stop mr-2';
              }
            }
            
            // Update status text
            if (statusElement) {
              if (btn.includes('mobile')) {
                statusElement.textContent = '🛑 Stop';
              } else {
                statusElement.textContent = '🛑 Stop Listening';
              }
            }
          } else {
            // Reset button appearance
            if (btn === 'voice-input-btn') {
              button.innerHTML = '<i class="fas fa-microphone text-sm sm:text-base"></i>';
              button.className = 'absolute right-2 sm:right-3 top-1/2 transform -translate-y-1/2 bg-purple-100 hover:bg-purple-200 text-purple-600 hover:text-purple-700 transition-all p-2 rounded-full';
            } else if (btn === 'floating-voice-btn') {
              button.innerHTML = '<i class="fas fa-microphone text-base"></i>';
              button.className = 'bg-gradient-to-r from-red-500 to-pink-500 text-white w-12 h-12 rounded-full shadow-xl hover:shadow-2xl transition-all duration-300 flex items-center justify-center';
            } else {
              button.classList.remove('from-red-500', 'to-pink-500', 'animate-pulse');
              button.classList.add('from-purple-500', 'to-blue-500');
              const icon = button.querySelector('i');
              if (icon) {
                icon.className = 'fas fa-microphone mr-2';
              }
            }
            
            // Reset status text
            if (statusElement) {
              if (btn.includes('mobile')) {
                statusElement.textContent = '🎤 Voice';
              } else {
                statusElement.textContent = '🎤 Start Voice Input';
              }
            }
          }
        });

        // Update voice animation
        const voiceAnimation = document.getElementById('voice-animation');
        if (voiceAnimation) {
          voiceAnimation.style.transform = isListening ? 'scaleX(1)' : 'scaleX(0)';
        }
      }

      showVoiceFeedback(message) {
        const feedback = document.getElementById('voice-feedback');
        const feedbackText = document.getElementById('voice-feedback-text');
        
        feedbackText.textContent = message;
        feedback.classList.remove('hidden');
      }

      hideVoiceFeedback() {
        const feedback = document.getElementById('voice-feedback');
        feedback.classList.add('hidden');
      }

      showVoiceNotSupported() {
        this.showVoiceFeedback('Voice recognition not supported in this browser. Try Chrome or Firefox.');
        this.showNotification('Voice recognition not available. Please use text input or try a different browser.', 'warning');
        setTimeout(() => {
          this.hideVoiceFeedback();
        }, 3000);
      }

      async requestMicrophonePermission() {
        try {
          const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
          stream.getTracks().forEach(track => track.stop());
          return true;
        } catch (error) {
          console.error('Microphone permission denied:', error);
          this.showNotification('Microphone access is required for voice input. Please allow access and try again.', 'error');
          return false;
        }
      }

      async testVoiceFeatures() {
        // Test microphone access
        const micAccess = await this.requestMicrophonePermission();
        
        // Test speech recognition
        const speechRecognition = 'webkitSpeechRecognition' in window || 'SpeechRecognition' in window;
        
        // Test speech synthesis
        const speechSynthesis = 'speechSynthesis' in window;
        
        console.log('Voice Features Test:', {
          microphone: micAccess,
          speechRecognition,
          speechSynthesis
        });
        
        return {
          microphone: micAccess,
          speechRecognition,
          speechSynthesis,
          fullSupport: micAccess && speechRecognition && speechSynthesis
        };
      }

      showVoiceSettings() {
        const settingsModal = document.createElement('div');
        settingsModal.className = 'fixed inset-0 bg-black/50 z-60 flex items-center justify-center p-4';
        settingsModal.innerHTML = `
          <div class="bg-white rounded-xl shadow-2xl max-w-md w-full p-6">
            <div class="flex items-center justify-between mb-4">
              <h3 class="text-lg font-semibold text-gray-800">Voice Settings</h3>
              <button id="close-voice-settings" class="text-gray-500 hover:text-gray-700">
                <i class="fas fa-times"></i>
              </button>
            </div>
            
            <div class="space-y-4">
              <!-- Voice Speed -->
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Speech Speed</label>
                <select id="voice-speed-setting" class="w-full border border-gray-300 rounded-lg px-3 py-2">
                  <option value="0.7">Slow</option>
                  <option value="0.9" selected>Normal</option>
                  <option value="1.2">Fast</option>
                </select>
              </div>
              
              <!-- Voice Selection -->
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Voice</label>
                <div class="flex space-x-2">
                  <select id="voice-selection" class="flex-1 border border-gray-300 rounded-lg px-3 py-2">
                    <option value="auto-female" selected>Auto Female Voice ♀️</option>
                    <option value="auto">Auto (Best Available)</option>
                  </select>
                  <button id="test-voice-btn" class="bg-gradient-to-r from-pink-500 to-rose-500 text-white px-4 py-2 rounded-lg hover:shadow-lg transition-all text-sm">
                    <i class="fas fa-play mr-1"></i>Test
                  </button>
                </div>
              </div>
              
              <!-- Test Voice -->
              <button id="test-voice-settings" class="w-full bg-purple-500 text-white py-2 px-4 rounded-lg hover:bg-purple-600 transition-colors">
                <i class="fas fa-play mr-2"></i>Test Voice
              </button>
            </div>
          </div>
        `;
        
        document.body.appendChild(settingsModal);
        
        // Populate voice options
        this.populateVoiceOptions();
        
        // Event listeners
        settingsModal.querySelector('#close-voice-settings').addEventListener('click', () => {
          settingsModal.remove();
        });
        
        settingsModal.querySelector('#test-voice-settings').addEventListener('click', () => {
          this.speakText('This is a test of the voice settings. How does this sound?');
        });
        
        settingsModal.addEventListener('click', (e) => {
          if (e.target === settingsModal) {
            settingsModal.remove();
          }
        });
      }

      showVoiceHelp() {
        const helpModal = document.createElement('div');
        helpModal.className = 'fixed inset-0 bg-black/50 z-60 flex items-center justify-center p-4';
        helpModal.innerHTML = `
          <div class="bg-white rounded-xl shadow-2xl max-w-lg w-full p-6">
            <div class="flex items-center justify-between mb-4">
              <h3 class="text-lg font-semibold text-gray-800">Voice Assistant Help</h3>
              <button id="close-voice-help" class="text-gray-500 hover:text-gray-700">
                <i class="fas fa-times"></i>
              </button>
            </div>
            
            <div class="space-y-4 text-sm text-gray-600">
              <div>
                <h4 class="font-semibold text-gray-800 mb-2">🎤 Voice Input</h4>
                <ul class="space-y-1 ml-4">
                  <li>• Click any microphone button to start</li>
                  <li>• Speak clearly and at normal pace</li>
                  <li>• Wait for the "listening" indicator</li>
                  <li>• Your speech will be converted to text automatically</li>
                </ul>
              </div>
              
              <div>
                <h4 class="font-semibold text-gray-800 mb-2">🔊 Voice Output</h4>
                <ul class="space-y-1 ml-4">
                  <li>• Toggle voice output on/off as needed</li>
                  <li>• AI responses will be spoken aloud</li>
                  <li>• Adjust speed in voice settings</li>
                  <li>• Works with all response types</li>
                </ul>
              </div>
              
              <div>
                <h4 class="font-semibold text-gray-800 mb-2">⌨️ Keyboard Shortcuts</h4>
                <ul class="space-y-1 ml-4">
                  <li>• <kbd class="bg-gray-200 px-1 rounded">Ctrl+M</kbd> - Quick voice input</li>
                  <li>• <kbd class="bg-gray-200 px-1 rounded">Ctrl+K</kbd> - Open assistant</li>
                  <li>• <kbd class="bg-gray-200 px-1 rounded">Escape</kbd> - Close assistant</li>
                </ul>
              </div>
              
              <div>
                <h4 class="font-semibold text-gray-800 mb-2">🔧 Troubleshooting</h4>
                <ul class="space-y-1 ml-4">
                  <li>• Allow microphone access when prompted</li>
                  <li>• Use Chrome or Firefox for best results</li>
                  <li>• Check your internet connection</li>
                  <li>• Ensure a quiet environment</li>
                </ul>
              </div>
            </div>
            
            <div class="mt-6 flex space-x-3">
              <button id="test-voice-help" class="flex-1 bg-purple-500 text-white py-2 px-4 rounded-lg hover:bg-purple-600 transition-colors">
                <i class="fas fa-microphone mr-2"></i>Test Voice
              </button>
              <button id="close-voice-help-btn" class="flex-1 bg-gray-200 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors">
                Close
              </button>
            </div>
          </div>
        `;
        
        document.body.appendChild(helpModal);
        
        // Event listeners
        helpModal.querySelector('#close-voice-help').addEventListener('click', () => {
          helpModal.remove();
        });
        
        helpModal.querySelector('#close-voice-help-btn').addEventListener('click', () => {
          helpModal.remove();
        });
        
        helpModal.querySelector('#test-voice-help').addEventListener('click', () => {
          this.testVoiceFeatures();
        });
        
        helpModal.addEventListener('click', (e) => {
          if (e.target === helpModal) {
            helpModal.remove();
          }
        });
      }

      populateVoiceOptions() {
        const voiceSelect = document.getElementById('voice-selection');
        if (!voiceSelect || !this.voices) return;
        
        // Clear existing options except auto
        voiceSelect.innerHTML = '<option value="auto">Auto (Best Available)</option>';
        
        // Add available voices
        this.voices.forEach((voice, index) => {
          if (voice.lang.startsWith('en')) {
            const option = document.createElement('option');
            option.value = index;
            option.textContent = `${voice.name} (${voice.lang})`;
            voiceSelect.appendChild(option);
          }
        });
      }

      showNotification(message, type = 'info') {
        const notification = document.createElement('div');
        const bgColor = {
          'info': 'bg-blue-500',
          'success': 'bg-green-500',
          'warning': 'bg-yellow-500',
          'error': 'bg-red-500'
        }[type] || 'bg-blue-500';
        
        notification.className = `fixed top-4 right-4 ${bgColor} text-white p-4 rounded-lg shadow-lg z-50 transform translate-x-full transition-transform duration-300 max-w-sm`;
        notification.innerHTML = `
          <div class="flex items-center space-x-2">
            <i class="fas fa-${type === 'error' ? 'exclamation-triangle' : type === 'success' ? 'check-circle' : type === 'warning' ? 'exclamation-circle' : 'info-circle'}"></i>
            <span class="text-sm">${message}</span>
            <button class="ml-2 text-white hover:text-gray-200" onclick="this.parentElement.parentElement.remove()">
              <i class="fas fa-times"></i>
            </button>
          </div>
        `;

        document.body.appendChild(notification);

        setTimeout(() => {
          notification.style.transform = 'translateX(0)';
        }, 100);

        setTimeout(() => {
          notification.style.transform = 'translateX(100%)';
          setTimeout(() => {
            if (notification.parentElement) {
              notification.remove();
            }
          }, 300);
        }, 4000);
      }

      toggleSpeechOutput() {
        this.config.behavior.enableVoice = !this.config.behavior.enableVoice;
        const speakToggle = document.getElementById('speak-toggle');

        if (this.config.behavior.enableVoice) {
          speakToggle.innerHTML = '<i class="fas fa-volume-up mr-2"></i>Voice Output: ON';
          speakToggle.className = 'w-full bg-gradient-to-r from-green-500 to-teal-500 text-white py-2 px-3 rounded-lg hover:shadow-lg transition-all text-sm';
        } else {
          speakToggle.innerHTML = '<i class="fas fa-volume-mute mr-2"></i>Voice Output: OFF';
          speakToggle.className = 'w-full bg-gradient-to-r from-gray-500 to-gray-600 text-white py-2 px-3 rounded-lg hover:shadow-lg transition-all text-sm';
        }
      }

      speakText(text) {
        if (!this.config.behavior.enableVoice || !this.synthesis) return;

        // Stop any current speech
        this.synthesis.cancel();

        // Clean text for speech (remove markdown and special characters)
        const cleanText = text
          .replace(/[*#`]/g, '')
          .replace(/\n/g, ' ')
          .replace(/\s+/g, ' ')
          .trim();
        
        if (!cleanText) return;
        
        const utterance = new SpeechSynthesisUtterance(cleanText);
        
        // Get voice speed from settings
        const voiceSpeedSelect = document.getElementById('voice-speed');
        const selectedSpeed = voiceSpeedSelect ? parseFloat(voiceSpeedSelect.value) : 0.9;
        
        utterance.rate = selectedSpeed;
        utterance.pitch = 1.1; // Slightly higher pitch for more feminine sound
        utterance.volume = 0.8;

        // Try to use the best available female voice
        const voices = this.synthesis.getVoices();
        let preferredVoice = this.selectBestFemaleVoice(voices);
        
        // Fallback to any English voice if no female voice found
        if (!preferredVoice) {
          preferredVoice = voices.find(voice => voice.lang.startsWith('en'));
        }
        
        if (preferredVoice) {
          utterance.voice = preferredVoice;
        }

        // Add event listeners
        utterance.onstart = () => {
          this.isSpeaking = true;
          console.log('Speech started');
        };

        utterance.onend = () => {
          this.isSpeaking = false;
          console.log('Speech ended');
        };

        utterance.onerror = (event) => {
          this.isSpeaking = false;
          console.error('Speech error:', event.error);
        };

        // Speak the text
        this.synthesis.speak(utterance);
      }

      selectBestFemaleVoice(voices) {
        // Priority list of female voice names (common across different systems)
        const femaleVoiceNames = [
          'Microsoft Zira Desktop', // Windows female voice
          'Microsoft Zira', 
          'Google US English Female',
          'Samantha', // macOS female voice
          'Victoria', // macOS female voice
          'Karen', // macOS female voice
          'Moira', // macOS female voice
          'Tessa', // macOS female voice
          'Veena', // macOS female voice
          'Fiona', // macOS female voice
          'female', // Generic female
          'woman', // Generic woman
        ];

        // First, try to find exact matches for known female voices
        for (const voiceName of femaleVoiceNames) {
          const voice = voices.find(v => 
            v.name.toLowerCase().includes(voiceName.toLowerCase())
          );
          if (voice) {
            console.log(`Selected female voice: ${voice.name}`);
            return voice;
          }
        }

        // Then try to find voices that contain female indicators
        const femaleIndicators = ['female', 'woman', 'zira', 'samantha', 'karen', 'moira', 'tessa', 'victoria', 'fiona', 'veena'];
        for (const indicator of femaleIndicators) {
          const voice = voices.find(v => 
            v.name.toLowerCase().includes(indicator)
          );
          if (voice) {
            console.log(`Selected female voice by indicator: ${voice.name}`);
            return voice;
          }
        }

        // Fallback: look for voices with common female names
        const commonFemaleNames = ['anna', 'emma', 'sophia', 'olivia', 'ava', 'isabella', 'mia', 'emily', 'charlotte', 'madison', 'elizabeth', 'sofia', 'chloe', 'ella', 'grace', 'victoria', 'aria', 'scarlett', 'zoey', 'stella', 'natalie', 'leah', 'hazel', 'violet', 'aurora', 'savannah', 'audrey', 'brooklyn', 'bella', 'claire', 'lucy', 'maya', 'elena', 'sarah', 'ariana', 'gabriella', 'alice', 'ruby', 'eva', 'julia', 'vivian', 'sophie', 'amanda', 'stephanie', 'molly', 'nicole', 'jessica', 'michelle', 'laura', 'lisa', 'nancy', 'betty', 'helen', 'sandra', 'donna', 'carol', 'ruth', 'sharon'];
        
        for (const name of commonFemaleNames) {
          const voice = voices.find(v => 
            v.name.toLowerCase().includes(name)
          );
          if (voice) {
            console.log(`Selected voice with female name: ${voice.name}`);
            return voice;
          }
        }

        console.log('No female voice found, will use default');
        return null;
      }

      testFemaleVoice() {
        if (!this.synthesis || this.isSpeaking) return;
        
        const voices = this.synthesis.getVoices();
        const femaleVoice = this.selectBestFemaleVoice(voices);
        
        const testText = "Hello! I'm your NextBloom AI assistant with a female voice. I'm here to help you with career guidance, learning support, and motivation. I can speak your responses and understand your voice commands. How does my voice sound?";
        const utterance = new SpeechSynthesisUtterance(testText);
        
        if (femaleVoice) {
          utterance.voice = femaleVoice;
          console.log(`Testing female voice: ${femaleVoice.name}`);
        } else {
          console.log('Using default voice (no female voice found)');
        }
        
        utterance.rate = 0.9;
        utterance.pitch = 1.1;
        utterance.volume = 0.8;
        
        this.synthesis.speak(utterance);
      }

      openAssistant() {
        const modal = document.getElementById('ai-assistant-modal');
        const modalContent = modal.querySelector('div');
        
        modal.classList.remove('hidden');
        
        // Trigger animation
        setTimeout(() => {
          modalContent.style.transform = 'scale(1)';
          modalContent.style.opacity = '1';
        }, 10);

        // Focus on input
        setTimeout(() => {
          const chatInput = document.getElementById('chat-input');
          if (chatInput) {
            chatInput.focus();
          }
        }, 300);

        // Update indicators
        this.updateVoiceSupportIndicator();
        
        // Show floating voice button on mobile if voice is supported
        if (window.innerWidth <= 768 && this.recognition) {
          const floatingVoiceBtn = document.getElementById('floating-voice-button');
          if (floatingVoiceBtn) {
            floatingVoiceBtn.classList.remove('hidden');
          }
        }
        
        // Show voice tutorial on first use
        this.showVoiceTutorialIfNeeded();
      }

      closeAssistant() {
        const modal = document.getElementById('ai-assistant-modal');
        const modalContent = modal.querySelector('div');
        
        // Animate out
        modalContent.style.transform = 'scale(0.95)';
        modalContent.style.opacity = '0';
        
        // Stop any ongoing speech
        if (this.synthesis) {
          this.synthesis.cancel();
        }
        
        // Stop listening
        this.stopListening();
        
        // Hide voice feedback
        this.hideVoiceFeedback();
        
        // Hide floating voice button
        const floatingVoiceBtn = document.getElementById('floating-voice-button');
        if (floatingVoiceBtn) {
          floatingVoiceBtn.classList.add('hidden');
        }
        
        setTimeout(() => {
          modal.classList.add('hidden');
        }, 300);
      }

      setupMobileOptimizations() {
        // Detect mobile device
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        
        if (isMobile) {
          // Add mobile-specific optimizations
          const chatInput = document.getElementById('chat-input');
          
          // Prevent zoom on focus for iOS
          chatInput.addEventListener('focus', () => {
            const viewport = document.querySelector('meta[name=viewport]');
            if (viewport) {
              viewport.setAttribute('content', 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no');
            }
          });
          
          chatInput.addEventListener('blur', () => {
            const viewport = document.querySelector('meta[name=viewport]');
            if (viewport) {
              viewport.setAttribute('content', 'width=device-width, initial-scale=1.0');
            }
          });
          
          // Add haptic feedback for voice button (if supported)
          const voiceBtn = document.getElementById('voice-input-btn');
          voiceBtn.addEventListener('touchstart', () => {
            if (navigator.vibrate) {
              navigator.vibrate(50);
            }
          });
          
          // Optimize for mobile keyboards
          this.setupMobileKeyboard();
        }
      }

      setupMobileKeyboard() {
        const modal = document.getElementById('ai-assistant-modal');
        const chatInput = document.getElementById('chat-input');
        
        // Adjust modal when keyboard appears
        const handleResize = () => {
          const vh = window.innerHeight * 0.01;
          modal.style.setProperty('--vh', `${vh}px`);
        };
        
        window.addEventListener('resize', handleResize);
        handleResize();
        
        // Auto-scroll to input when keyboard appears
        chatInput.addEventListener('focus', () => {
          setTimeout(() => {
            chatInput.scrollIntoView({ behavior: 'smooth', block: 'center' });
          }, 300);
        });
      }

      toggleVoiceInput() {
        if (!this.recognition) {
          this.showNotification('Voice recognition is not supported in your browser', 'error');
          return;
        }

        if (this.isListening) {
          this.recognition.stop();
        } else {
          this.recognition.start();
        }
      }

      updateVoiceButton(isListening) {
        const voiceBtn = document.getElementById('voice-input-btn');
        const icon = voiceBtn.querySelector('i');
        
        if (isListening) {
          icon.className = 'fas fa-stop text-lg text-red-500';
          voiceBtn.classList.add('animate-pulse');
        } else {
          icon.className = 'fas fa-microphone text-lg';
          voiceBtn.classList.remove('animate-pulse');
        }
      }

      sendMessage() {
        const input = document.getElementById('chat-input');
        const message = input.value.trim();
        
        if (!message) return;

        this.handleUserInput(message, 'text');
        input.value = '';
      }

      async handleUserInput(message, type) {
        // Add user message to chat
        this.addMessageToChat(message, 'user');

        // Show typing indicator
        this.showTypingIndicator();

        try {
          // Try to get AI response
          const response = await this.getAIResponse(message);
          this.addMessageToChat(response, 'ai');
          
          // Speak the response if voice output is enabled
          if (this.config.behavior.enableVoice) {
            this.speakText(response);
          }
        } catch (error) {
          console.error('Chat error:', error);
          // Fallback to local response
          const fallbackResponse = this.getLocalResponse(message);
          this.addMessageToChat(fallbackResponse, 'ai');
          
          // Speak fallback response too
          if (this.config.behavior.enableVoice) {
            this.speakText(fallbackResponse);
          }
        }

        this.hideTypingIndicator();
      }

      async getAIResponse(message) {
        // Try external APIs first if available
        if (this.apiStatus === 'available') {
          try {
            // Try OpenAI first
            if (this.config.openai.apiKey) {
              const response = await this.tryOpenAI(message);
              if (response) return response;
            }
            
            // Try Hugging Face as fallback
            if (this.config.huggingface.apiKey) {
              const response = await this.tryHuggingFace(message);
              if (response) return response;
            }
          } catch (error) {
            console.log('External APIs failed, trying local backend:', error);
          }
        }

        // Try local backend if enabled
        if (this.config.backend.enabled) {
          try {
            const userEmail = localStorage.getItem('userEmail') || '';
            const response = await fetch(`${this.config.backend.url}/chat`, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify({
                message: message,
                user_email: userEmail
              })
            });

            const data = await response.json();
            if (data.success) {
              return data.response.response;
            }
          } catch (error) {
            console.log('Local backend failed, using pre-programmed responses:', error);
          }
        }

        // Final fallback to local responses
        return this.getLocalResponse(message);
      }

      async tryOpenAI(message) {
        try {
          const response = await fetch('https://api.openai.com/v1/chat/completions', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
              'Authorization': `Bearer ${this.config.openai.apiKey}`
            },
            body: JSON.stringify({
              model: this.config.openai.model || 'gpt-3.5-turbo',
              messages: [
                {
                  role: 'system',
                  content: this.config.systemPrompt
                },
                {
                  role: 'user',
                  content: message
                }
              ],
              max_tokens: this.config.openai.maxTokens || 300,
              temperature: this.config.openai.temperature || 0.7
            })
          });
          
          if (response.ok) {
            const data = await response.json();
            return data.choices[0].message.content;
          }
        } catch (error) {
          console.error('OpenAI API error:', error);
        }
        return null;
      }

      async tryHuggingFace(message) {
        try {
          const response = await fetch(`https://api-inference.huggingface.co/models/${this.config.huggingface.model || 'microsoft/DialoGPT-medium'}`, {
            method: 'POST',
            headers: {
              'Authorization': `Bearer ${this.config.huggingface.apiKey}`,
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({
              inputs: message,
              parameters: {
                max_length: this.config.huggingface.maxLength || 200,
                temperature: this.config.huggingface.temperature || 0.7
              }
            })
          });
          
          if (response.ok) {
            const data = await response.json();
            return data.generated_text || data[0]?.generated_text;
          }
        } catch (error) {
          console.error('Hugging Face API error:', error);
        }
        return null;
      }

      getLocalResponse(message) {
        const lowerMessage = message.toLowerCase();
        
        // Greeting detection
        if (this.containsAny(lowerMessage, ['hello', 'hi', 'hey', 'good morning', 'good afternoon'])) {
          return this.getRandomResponse(this.responses.greetings);
        }
        
        // Career-related queries
        if (this.containsAny(lowerMessage, ['career', 'job', 'work', 'profession', 'employment'])) {
          if (this.containsAny(lowerMessage, ['technology', 'tech', 'programming', 'coding', 'developer'])) {
            return this.getRandomResponse(this.responses.career.technology);
          } else if (this.containsAny(lowerMessage, ['business', 'marketing', 'management', 'sales'])) {
            return this.getRandomResponse(this.responses.career.business);
          } else {
            return this.getRandomResponse(this.responses.career.general);
          }
        }
        
        // Emotional support
        if (this.containsAny(lowerMessage, ['anxious', 'worried', 'scared', 'nervous', 'afraid', 'overwhelmed'])) {
          return this.getRandomResponse(this.responses.emotional.anxiety);
        }
        
        if (this.containsAny(lowerMessage, ['unmotivated', 'hopeless', 'give up', 'quit', 'failure', 'motivation'])) {
          return this.getRandomResponse(this.responses.emotional.motivation);
        }
        
        if (this.containsAny(lowerMessage, ['confidence', 'doubt', 'not good enough', 'imposter', 'capable'])) {
          return this.getRandomResponse(this.responses.emotional.confidence);
        }
        
        // Learning queries
        if (this.containsAny(lowerMessage, ['learn programming', 'coding', 'web development', 'javascript', 'python'])) {
          return this.getRandomResponse(this.responses.learning.programming);
        }
        
        if (this.containsAny(lowerMessage, ['learn', 'study', 'course', 'education', 'skill'])) {
          return this.getRandomResponse(this.responses.learning.general);
        }
        
        // Job without degree
        if (this.containsAny(lowerMessage, ['without degree', 'no degree', 'dropout', 'job options'])) {
          return this.getRandomResponse(this.responses.jobs);
        }
        
        // Default response
        return this.getRandomResponse(this.responses.default);
      }

      containsAny(text, keywords) {
        return keywords.some(keyword => text.includes(keyword));
      }

      getRandomResponse(responses) {
        return responses[Math.floor(Math.random() * responses.length)];
      }

      formatMessage(message) {
        // Convert markdown-like formatting to HTML
        return message
          .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
          .replace(/\*(.*?)\*/g, '<em>$1</em>')
          .replace(/\n/g, '<br>')
          .replace(/•/g, '•');
      }

      addMessageToChat(message, sender) {
        const chatMessages = document.getElementById('chat-messages');
        const messageDiv = document.createElement('div');
        messageDiv.className = 'flex items-start space-x-3 mb-4';

        if (sender === 'user') {
          messageDiv.className += ' flex-row-reverse space-x-reverse';
          messageDiv.innerHTML = `
            <div class="w-8 h-8 bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center flex-shrink-0">
              <i class="fas fa-user text-white text-sm"></i>
            </div>
            <div class="bg-gradient-to-r from-purple-500 to-blue-500 text-white rounded-2xl rounded-tr-sm p-4 shadow-sm max-w-md">
              <p>${this.formatMessage(message)}</p>
            </div>
          `;
        } else {
          messageDiv.innerHTML = `
            <div class="w-8 h-8 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full flex items-center justify-center flex-shrink-0">
              <i class="fas fa-robot text-white text-sm"></i>
            </div>
            <div class="bg-white rounded-2xl rounded-tl-sm p-4 shadow-sm max-w-md">
              <p class="text-gray-800">${this.formatMessage(message)}</p>
            </div>
          `;
        }

        chatMessages.appendChild(messageDiv);
        chatMessages.scrollTop = chatMessages.scrollHeight;
      }

      addOptionsToChat(options) {
        const chatMessages = document.getElementById('chat-messages');
        const optionsDiv = document.createElement('div');
        optionsDiv.className = 'flex items-start space-x-3';
        
        const optionsHTML = options.map(option => 
          `<button class="career-option bg-purple-100 hover:bg-purple-200 text-purple-700 px-3 py-2 rounded-lg text-sm transition-colors mb-2 mr-2" data-option="${option}">${option}</button>`
        ).join('');

        optionsDiv.innerHTML = `
          <div class="w-8 h-8 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full flex items-center justify-center flex-shrink-0">
            <i class="fas fa-robot text-white text-sm"></i>
          </div>
          <div class="bg-white rounded-2xl rounded-tl-sm p-4 shadow-sm max-w-md">
            <p class="text-gray-800 mb-3">Choose an option:</p>
            <div class="flex flex-wrap">
              ${optionsHTML}
            </div>
          </div>
        `;

        chatMessages.appendChild(optionsDiv);
        chatMessages.scrollTop = chatMessages.scrollHeight;

        // Bind click events to options
        optionsDiv.querySelectorAll('.career-option').forEach(button => {
          button.addEventListener('click', (e) => {
            const option = e.target.dataset.option;
            this.handleUserInput(option, 'text');
          });
        });
      }

      addSuggestionsToChat(suggestions) {
        const chatMessages = document.getElementById('chat-messages');
        const suggestionsDiv = document.createElement('div');
        suggestionsDiv.className = 'flex items-start space-x-3';
        
        const suggestionsHTML = suggestions.map(suggestion => 
          `<li class="text-gray-700 mb-1">• ${suggestion}</li>`
        ).join('');

        suggestionsDiv.innerHTML = `
          <div class="w-8 h-8 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full flex items-center justify-center flex-shrink-0">
            <i class="fas fa-robot text-white text-sm"></i>
          </div>
          <div class="bg-white rounded-2xl rounded-tl-sm p-4 shadow-sm max-w-md">
            <p class="text-gray-800 mb-3">Here are some learning suggestions:</p>
            <ul class="text-sm">
              ${suggestionsHTML}
            </ul>
          </div>
        `;

        chatMessages.appendChild(suggestionsDiv);
        chatMessages.scrollTop = chatMessages.scrollHeight;
      }

      addCategoriestoChat(categories) {
        const chatMessages = document.getElementById('chat-messages');
        const categoriesDiv = document.createElement('div');
        categoriesDiv.className = 'flex items-start space-x-3';
        
        const categoriesHTML = categories.map(category => 
          `<button class="category-option bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-2 rounded-lg text-sm transition-colors mb-2 mr-2 capitalize" data-category="${category}">${category}</button>`
        ).join('');

        categoriesDiv.innerHTML = `
          <div class="w-8 h-8 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full flex items-center justify-center flex-shrink-0">
            <i class="fas fa-robot text-white text-sm"></i>
          </div>
          <div class="bg-white rounded-2xl rounded-tl-sm p-4 shadow-sm max-w-md">
            <p class="text-gray-800 mb-3">Choose a field to explore:</p>
            <div class="flex flex-wrap">
              ${categoriesHTML}
            </div>
          </div>
        `;

        chatMessages.appendChild(categoriesDiv);
        chatMessages.scrollTop = chatMessages.scrollHeight;

        // Bind click events to categories
        categoriesDiv.querySelectorAll('.category-option').forEach(button => {
          button.addEventListener('click', (e) => {
            const category = e.target.dataset.category;
            this.handleUserInput(`Tell me about ${category} careers`, 'text');
          });
        });
      }

      showTypingIndicator() {
        const chatMessages = document.getElementById('chat-messages');
        const typingDiv = document.createElement('div');
        typingDiv.id = 'typing-indicator';
        typingDiv.className = 'flex items-start space-x-3';
        typingDiv.innerHTML = `
          <div class="w-8 h-8 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full flex items-center justify-center flex-shrink-0">
            <i class="fas fa-robot text-white text-sm"></i>
          </div>
          <div class="bg-white rounded-2xl rounded-tl-sm p-4 shadow-sm">
            <div class="flex space-x-1">
              <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce"></div>
              <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 0.1s;"></div>
              <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 0.2s;"></div>
            </div>
          </div>
        `;
        chatMessages.appendChild(typingDiv);
        chatMessages.scrollTop = chatMessages.scrollHeight;
      }

      hideTypingIndicator() {
        const typingIndicator = document.getElementById('typing-indicator');
        if (typingIndicator) {
          typingIndicator.remove();
        }
      }

      handleQuickAction(action) {
        const actions = {
          career: "I'd like to explore career options",
          support: "I need some emotional support and motivation",
          learning: "Can you suggest some learning resources?",
          roadmap: "Help me create a learning roadmap"
        };

        if (actions[action]) {
          this.handleUserInput(actions[action], 'text');
        }
      }

      speakText(text) {
        if (!this.synthesis) return;

        this.isSpeaking = true;
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.rate = 0.9;
        utterance.pitch = 1;
        utterance.volume = 0.8;

        utterance.onend = () => {
          this.isSpeaking = false;
        };

        this.synthesis.speak(utterance);
      }

      showTypingIndicator() {
        const chatMessages = document.getElementById('chat-messages');
        const typingDiv = document.createElement('div');
        typingDiv.id = 'typing-indicator';
        typingDiv.className = 'flex items-start space-x-3 mb-4';
        typingDiv.innerHTML = `
          <div class="w-8 h-8 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full flex items-center justify-center flex-shrink-0">
            <i class="fas fa-robot text-white text-sm"></i>
          </div>
          <div class="bg-white rounded-2xl rounded-tl-sm p-4 shadow-sm">
            <div class="typing-dots">
              <span></span>
              <span></span>
              <span></span>
            </div>
            <span class="text-gray-500 text-sm ml-2">AI is thinking...</span>
          </div>
        `;
        chatMessages.appendChild(typingDiv);
        chatMessages.scrollTop = chatMessages.scrollHeight;
      }

      hideTypingIndicator() {
        const typingIndicator = document.getElementById('typing-indicator');
        if (typingIndicator) {
          typingIndicator.remove();
        }
      }

      showNotification(message, type = 'info') {
        const notification = document.createElement('div');
        notification.className = `fixed top-24 right-6 p-4 rounded-lg shadow-lg z-50 transform translate-x-full transition-transform duration-300 ${
          type === 'error' ? 'bg-red-500 text-white' : 'bg-blue-500 text-white'
        }`;
        notification.textContent = message;

        document.body.appendChild(notification);

        setTimeout(() => {
          notification.style.transform = 'translateX(0)';
        }, 100);

        setTimeout(() => {
          notification.style.transform = 'translateX(100%)';
          setTimeout(() => notification.remove(), 300);
        }, 3000);
      }

      showVoiceTutorialIfNeeded() {
        // Check if user has seen voice tutorial
        const hasSeenTutorial = localStorage.getItem('voice-tutorial-seen');
        if (hasSeenTutorial || !this.recognition) return;
        
        setTimeout(() => {
          const tutorial = document.createElement('div');
          tutorial.className = 'fixed inset-0 bg-black/50 z-70 flex items-center justify-center p-4';
          tutorial.innerHTML = `
            <div class="bg-white rounded-xl shadow-2xl max-w-md w-full p-6 transform scale-95 opacity-0 transition-all duration-300">
              <div class="text-center">
                <div class="w-16 h-16 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-4">
                  <i class="fas fa-microphone text-white text-2xl"></i>
                </div>
                <h3 class="text-xl font-bold text-gray-800 mb-2">Voice Assistant Ready! 🎤</h3>
                <p class="text-gray-600 mb-6">Your AI assistant now supports voice input and output. Here's how to use it:</p>
                
                <div class="space-y-3 text-left text-sm">
                  <div class="flex items-start space-x-3">
                    <div class="w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                      <i class="fas fa-microphone text-purple-600 text-xs"></i>
                    </div>
                    <div>
                      <p class="font-medium">Voice Input</p>
                      <p class="text-gray-500">Click any microphone button and speak your question</p>
                    </div>
                  </div>
                  
                  <div class="flex items-start space-x-3">
                    <div class="w-6 h-6 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                      <i class="fas fa-volume-up text-green-600 text-xs"></i>
                    </div>
                    <div>
                      <p class="font-medium">Voice Output</p>
                      <p class="text-gray-500">AI responses will be spoken aloud automatically</p>
                    </div>
                  </div>
                  
                  <div class="flex items-start space-x-3">
                    <div class="w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                      <i class="fas fa-keyboard text-blue-600 text-xs"></i>
                    </div>
                    <div>
                      <p class="font-medium">Quick Access</p>
                      <p class="text-gray-500">Press <kbd class="bg-gray-200 px-1 rounded">Ctrl+M</kbd> for instant voice input</p>
                    </div>
                  </div>
                </div>
                
                <div class="mt-6 flex space-x-3">
                  <button id="try-voice-now" class="flex-1 bg-gradient-to-r from-purple-500 to-blue-500 text-white py-2 px-4 rounded-lg hover:shadow-lg transition-all font-medium">
                    <i class="fas fa-microphone mr-2"></i>Try Voice Now
                  </button>
                  <button id="skip-tutorial" class="flex-1 bg-gray-200 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors">
                    Skip
                  </button>
                </div>
              </div>
            </div>
          `;
          
          document.body.appendChild(tutorial);
          
          // Animate in
          setTimeout(() => {
            const content = tutorial.querySelector('div > div');
            content.classList.remove('scale-95', 'opacity-0');
            content.classList.add('scale-100', 'opacity-100');
          }, 100);
          
          // Event listeners
          tutorial.querySelector('#try-voice-now').addEventListener('click', () => {
            localStorage.setItem('voice-tutorial-seen', 'true');
            tutorial.remove();
            this.toggleVoiceInput();
          });
          
          tutorial.querySelector('#skip-tutorial').addEventListener('click', () => {
            localStorage.setItem('voice-tutorial-seen', 'true');
            tutorial.remove();
          });
          
          tutorial.addEventListener('click', (e) => {
            if (e.target === tutorial) {
              localStorage.setItem('voice-tutorial-seen', 'true');
              tutorial.remove();
            }
          });
        }, 3000);
      }
    }

    // Initialize AI Assistant when DOM is ready
    let aiAssistant;
    
    function initializeAIAssistant() {
      try {
        aiAssistant = new SimpleChatbot();
        console.log('AI Assistant initialized successfully');
        
        // Add a small delay to ensure all elements are ready
        setTimeout(() => {
          if (aiAssistant.updateVoiceSupportIndicator) {
            aiAssistant.updateVoiceSupportIndicator();
          }
        }, 1000);
        
      } catch (error) {
        console.error('Failed to initialize AI Assistant:', error);
      }
    }

    // Add global keyboard shortcut to open assistant
    document.addEventListener('keydown', (e) => {
      // Alt + A to open assistant from anywhere
      if (e.altKey && e.key === 'a') {
        e.preventDefault();
        if (aiAssistant) {
          aiAssistant.openAssistant();
        }
      }
    });

    // Add navigation voice assistant button event
    document.addEventListener('DOMContentLoaded', () => {
      const navVoiceBtn = document.getElementById('nav-voice-assistant');
      if (navVoiceBtn) {
        navVoiceBtn.addEventListener('click', () => {
          if (aiAssistant) {
            aiAssistant.openAssistant();
            // Show voice status indicator
            const statusIndicator = document.getElementById('nav-voice-status');
            if (statusIndicator && aiAssistant.recognition) {
              statusIndicator.classList.remove('hidden');
            }
          }
        });
      }

      // Test voice button event
      const testVoiceBtn = document.getElementById('test-voice-btn');
      if (testVoiceBtn) {
        testVoiceBtn.addEventListener('click', () => {
          if (aiAssistant) {
            aiAssistant.testFemaleVoice();
          }
        });
      }

      // Voice demo button event
      const voiceDemoBtn = document.getElementById('voice-demo-btn');
      if (voiceDemoBtn) {
        voiceDemoBtn.addEventListener('click', () => {
          if (aiAssistant) {
            aiAssistant.openAssistant();
            // Start voice input immediately
            setTimeout(() => {
              if (aiAssistant.recognition) {
                aiAssistant.toggleVoiceInput();
              }
            }, 800);
          } else {
            showNotification('🎙️ Voice Assistant is loading... Please try again in a moment!');
          }
        });
      }

      // Mobile Voice FAB event
      const mobileVoiceFab = document.getElementById('mobile-voice-fab');
      if (mobileVoiceFab) {
        mobileVoiceFab.addEventListener('click', () => {
          if (aiAssistant) {
            aiAssistant.openAssistant();
            // Start voice input immediately for mobile users
            setTimeout(() => {
              if (aiAssistant.recognition) {
                aiAssistant.toggleVoiceInput();
                // Add visual feedback to FAB
                mobileVoiceFab.classList.add('listening');
                setTimeout(() => {
                  mobileVoiceFab.classList.remove('listening');
                }, 3000);
              }
            }, 500);
          } else {
            showNotification('🎙️ Voice Assistant is loading... Please try again in a moment!');
          }
        });
      }
    });

    // Add to the existing initialization
    const originalInitializeApp = initializeApp;
    initializeApp = function() {
      originalInitializeApp();
      initializeAIAssistant();
    };

  </script>

    <!-- Enhanced Multilingual Voice Chatbot -->
    <script src="enhanced_chatbot.js"></script>
    <script>
        // Initialize enhanced chatbot when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Wait a bit for other scripts to load
            setTimeout(() => {
                if (typeof EnhancedChatbot !== 'undefined') {
                    window.enhancedChatbot = new EnhancedChatbot();
                    console.log('✅ Enhanced Chatbot initialized successfully');
                    
                    // Show notification about enhanced features
                    setTimeout(() => {
                        if (window.enhancedChatbot && window.enhancedChatbot.showNotification) {
                            window.enhancedChatbot.showNotification(
                                '🚀 Enhanced AI Chatbot loaded! Try voice input and multilingual support!', 
                                'success'
                            );
                        }
                    }, 2000);
                } else {
                    console.error('❌ Enhanced Chatbot failed to load');
                }
            }, 1000);
        });
        
        // Add enhanced chatbot button to navbar if it doesn't exist
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                const navVoiceBtn = document.getElementById('nav-voice-assistant');
                if (navVoiceBtn && window.enhancedChatbot) {
                    navVoiceBtn.addEventListener('click', function(e) {
                        e.preventDefault();
                        window.enhancedChatbot.openChatbot();
                    });
                }
            }, 1500);
        });
    </script>
    </body>
</html>